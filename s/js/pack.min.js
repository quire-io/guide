(function(e){function wa(){function a(a){b&&a(b);var d=indexedDB.open("quire",1);d.onsuccess=function(){a(b=d.result)};d.onerror=function(){a()}}var b;return{get:function(b,d){a(function(a){if(a){var h=a.transaction("dcache","readonly").objectStore("dcache").get(b);h.onsuccess=function(){var a=h.result;d(a?JSON.parse(a.data):null)};h.onerror=function(){d()}}else d()})},put:function(b,d,g){a(function(a){function f(){g&&(g(),g=null)}a?(a=a.transaction("dcache","readwrite").objectStore("dcache"),a=d?
a.put({id:b,data:JSON.stringify(d)}):a.delete(b),a.onsuccess=a.onerror=f):f()})}}}function xa(){return{get:function(a,b){b(G(a))},put:function(a,b,c){F(a,b);c&&c()}}}function Z(){null==e.inCgf&&(inCgf=null!=G("inCgf"));return inCgf}function aa(a){return a}function ya(a){return a&&(a.startsWith("https://quire.s3.amazonaws.com/")||"https://quire.s3.amazonaws.com"==a)?"/quis3"+a.substring(30):a}function za(a){return a&&(a.startsWith("/quis3/")||"/quis3"==a)?"https://quire.s3.amazonaws.com"+a.substring(6):
a}function J(a){null!=a&&null==a.offsetWidth&&J(null)}function Aa(a){var b=qrLang[1];a=Math.floor(((new Date).getTime()-(new Date(a)).getTime())/6E4);if(0<=a){if(2>a)return b[Ba];if(60>a)return b[Ca].replace("[=n]",a);a=Math.floor(a/60);if(2>a)return b[Da];if(24>a)return b[Ea].replace("[=n]",a);if(48>a)return b[Fa];a=Math.floor(a/24);if(8>a)return b[Ga].replace("[=n]",a)}}function B(a,b){try{var c=sessionStorage[a];return null!=c&&0!=b?JSON.parse(c):c}catch(d){}}function C(a,b,c){try{null==b?sessionStorage.removeItem(a):
sessionStorage[a]=0!=c?JSON.stringify(b):b}catch(d){}}function G(a,b){try{var c=localStorage[a];return null!=c&&0!=b?JSON.parse(c):c}catch(d){}}function F(a,b,c){try{null==b?localStorage.removeItem(a):localStorage[a]=0!=c?JSON.stringify(b):b}catch(d){}}function P(){return $("body").data("user-id")}function ba(a,b,c){if(null!=a){c=c||{};var d=0!=c.encode;K();y=$('<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+(d?Q(b):b)+"</div></div>");c.clz&&y.addClass(c.clz);b=
y;var d=c.placement,g=c.body;d||(d="bottom");b.detach().css({top:0,left:0,display:"block"}).addClass(d);g?$(document.body).append(b):b.insertAfter(a);g=$(a);a=$.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():null,{scroll:g.scrollTop(),width:g.outerWidth(),height:g.outerHeight()},g.offset());var g=b[0].offsetWidth,h=b[0].offsetHeight,f,l;"top"==d?(f=Math.round(a.top)-h,l=Math.round(a.left+(a.width-g)/2)):"bottom"==d&&(f=Math.round(a.top+a.height),l=Math.round(a.left+
(a.width-g)/2));b.addClass(d);var m=d,d=b[0].offsetWidth,r=b[0].offsetHeight;a=!1;g=$(b).children()[0];b.offset({top:f,left:l}).addClass("in");var h=b[0].offsetWidth,n=b[0].offsetHeight;"top"==m&&n!=r&&(f+=r-n,a=!0);"bottom"==m||"top"==m?(m=0,0>l&&(m=-2*l,l=0,b.offset({top:f,left:l}),h=b[0].offsetWidth),g.style.left=ca(m-d+h,h)):g.style.top=ca(n-r,n);a&&b.offset({top:f,left:l});c.fixPosition&&(c=y.offset(),y.offset({top:c.top+y.children()[0].offsetHeight,left:c.left}))}}function ca(a,b){return a?
50*(1-a/b)+"%":""}function K(){y&&y.remove()}function da(a,b){if(!browser.mobile)$(a).on("mouseenter",function(c){ba(a,b)}).on("mouseleave",function(a){K()})}function R(a,b,c,d,g,h,f){g||(g="x32");h||(h="");h+=f?" partner-icon":"";return a?['<img class="img-icon ',g," ",h,'" src="',a,'" alt="',Q(b),,'">'].join(""):['<div class="img-icon bg ',g," ",h," ","iconc-"+d,'">',Q(c),"</div>"].join("")}function Q(a){return $("<div></div>").text(a).html()}function ea(){}function E(){fa||(fa=!0,$(document).on("click.bs.dropdown",
"[data-toggle=dropdown]",function(a){var b=$(a.currentTarget),c=b.parent();setTimeout(function(){b.data("dropdownInited")||(b.data("dropdownInited",!0),c.hasClass("open")||(Ha(c[0]),ga(b)))},10);return!1}).on("click.bs.dropdown.data-api",function(a){a=$("[data-toggle=dropdown]").parent();var b=$.Event("hide.bs.dropdown");a.trigger(b);b.isDefaultPrevented()||a.removeClass("open").trigger($.Event("hidden.bs.dropdown"))}).on("click","#header .dropdown-menu, #homeBanner .dropdown-menu",function(a){a.stopPropagation()}))}
function Ha(a){$(a).on("click.bs.dropdown","[data-toggle=dropdown]",function(a){ga($(a.currentTarget));return!1})}function ga(a){a=a.parent();var b=a.hasClass("open"),c=document.createEvent("MouseEvent");c.initMouseEvent("click",!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,document);$("body")[0].dispatchEvent(c);b||(b=$.Event("show.bs.dropdown"),a.trigger(b),b.isDefaultPrevented()||(b=a.children(".dropdown-menu"),b.css({top:"",bottom:""}),a.toggleClass("open"),b[0].getBoundingClientRect().bottom>e.innerHeight&&
b.css({top:"auto",bottom:"100%"}),a.trigger($.Event("shown.bs.dropdown"))))}function ha(a){if(a==document.body||a.parentNode)ia(a),new ja(a)}function ia(a){var b;b=a==document.body||a.parentNode?null!=$(a).data(L):!1;b&&$(a).data(L).destroy()}function Ia(){if(M){M=null;var a=sessRefer();if(B(M,!1)!=a)return C(M,a,!1),a}}function S(a,b,c,d,g){b+=20;var h=Ja(b,c,d,g);a.scrollTo(h);b<g&&setTimeout(function(){S(a,b,c,d,g)},20)}function Ja(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a+b;--a;return-c/2*(a*(a-2)-
1)+b}function ka(){function a(a){var d=b.scrollTop(),g=b.height();$(".anim-init:not(.anim-end)").each(function(){var a=$(this);0!=d&&d+.7*g>a.offset().top&&a.addClass("anim-end")})}var b=$(e);b.scroll(a).resize(a);a()}function Ka(){$("#notification").length&&La();E();ka();la();ma();setTimeout(Ma,500)}function Na(){la();ma()}function Oa(){na();ka()}function na(){$("#notification").length&&notification.init();E();T()}function oa(){E();pa()}function Pa(){$("#wrap").hasClass("anonymous-view")||pa(!0);
setTimeout(Qa,6E4*(1+(parseInt(B(N,!1))||0)))}function Ra(){E()}function Ma(){var a=$(".cookie-message");if(a.length){var b="ckemg:"+currentUser();G(b)?a.remove():(a.addClass("in"),a.on("click","button",function(c){a.remove();F(b,!0)}))}}function Sa(){var a=new p($(".f-options .scroll-content")[0]);$(".f-options").on("shown.bs.dropdown",function(){a.syncSize()});qa($(".host-row"));$(".host-row").on("click",".radio label > input",function(a){ra($(a.currentTarget).data("value"))}).on("click",".dropdown-menu .u-item > a",
function(a){ra($(a.currentTarget).data("value"),$(a.currentTarget).text());a.preventDefault()});$(".not-allow-collapse").click(function(a){$(this).parent().removeClass("collapsed");a.preventDefault()});$(".contact-row input").change(function(){$("#contacts").val(this.checked?"1":"")})}function ra(a,b){$(".f-options").toggleClass("hide","global"==a);$("#acceptBtn").toggleClass("disabled",!a);$("#host").val(a);$(".f-options .options-value").text(b||"")}function U(a,b,c,d,g,e,f){sendQS(["oau.srch",[a,
b,c,d,g,e]],f)}function Ta(a,b,c,d){sendQS(["ical",[a,b,c]],d)}function qa(a){var b;a.on("mouseenter",".dropdown-menu .u-item > a",function(a){b=a.currentTarget;b.focus()}).on("mouseleave",".dropdown-menu",function(a){b&&b.blur()})}function Qa(){var a=$("#quire-logo"),b=parseInt(B(N,!1))||0;a.length&&(P()?100>a[0].offsetTop:90<a[0].offsetHeight)?b&&(C(N),logError("cdn","rlS"+b)):(Ua(),3>=b?(C(N,b+1,!1),reloadPage()):logError("cdn","rlF"))}function Ua(){e.caches&&caches.keys().then(function(a){return Promise.all(a.map(function(a){if(a.startsWith("sw-quire-cache"))return caches.delete(a)}))})}
function Va(){E();T()}function Wa(){function a(){var a=d.scrollTop(),a=h-a;l.css("top",(a<f?f:a)+"px").css("bottom","");var a=l.height(),b=l.offset().top+a-m.offset().top;0<b&&l.css("bottom",d.height()-(l.position().top+a)+b+"px")}function b(a){$(".category-picker .picked-item").text(a||$(".category-sidebar .category-list .active > a").text()).append('<i class="icon-angle-down"></i>')}function c(a){if(!(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)){a.preventDefault();var m=a.currentTarget.href.split("?category=");
r.loadCategory(1<m.length?m[1]:null);b(a.currentTarget.innerText)}}var d=$(e),g=$(".app-list"),h=g[0].offsetTop,f=$(".header-wrap").height()+25,l=$(".app-category"),m=$(".footer-wrap"),r=new t($(".app-search"),g);d.scroll(a).resize(a);r.syncActiveItem();b();$(".app-category").on("click","a",c);$(".category-picker").on("click",".u-item a",c);$(".more-row").on("click","a",function(a){a.preventDefault();r.loadMore()});a();for(var g=e.location.search,g=g.length?g.substring(1).split("&"):[],n=g.length;0<=
--n;){var k=g[n].split("=");if("text"==k[0]){r.currentText=r.inp[0].value=k[1];break}}}function Xa(){var a,b=new t($("#search"),$("#search .search-results"),{dropdown:!0});b.$element.on("keydown","input",function(c){switch(c.keyCode){case 27:c=b.inp[0];0==c.value.length?c.blur():(b.$element.removeClass("open"),b.$element.removeClass("dirty"),c.value="");break;case 38:b.$element.hasClass("open")&&(a=b.$list.find(".u-item:last a")[0],a.focus());break;case 40:b.$element.hasClass("open")&&(a=b.$list.find(".u-item a")[0],
a.focus())}}).on("keydown",".search-results",function(c){switch(c.keyCode){case 27:b.inp.focus();break;case 38:a&&(c=$(a).parent().prev().find("a"),c.length?(a=c[0],a.focus()):b.inp.focus());break;case 40:a&&(c=$(a).parent().next().find("a"),c.length?(a=c[0],a.focus()):b.inp.focus())}}).on("mouseenter",".dropdown-menu .u-item > a",function(b){a=b.currentTarget;a.focus()}).on("mouseleave",".dropdown-menu",function(b){a&&a.blur()})}function Ya(){function a(a){var b=a.parents(".f-options");b.find(".active").removeClass("active");
a.parent().addClass("active");b.find(".options-value").text(a.text()||"");a=a.data("value");switch(a){case "all":l=a;break;case "my":l=a;break;default:m=a}}var b=new p($(".target-options .scroll-content")[0]);$(".target-options").on("shown.bs.dropdown",function(){b.syncSize()});qa($(".cal-sync-config"));var c=$(".link-row input"),d=$(".target-options .options-value"),g=$(".target-options .all-item"),h=$(".target-options .u-item:not(.all-item):first"),f=$(".logo-row").data("oid"),l,m,r=0==h.length;
a($(".task-options .u-item:first a"));a((r?g:h).children().first());$(".cal-sync-config").on("click",".dropdown-menu .u-item > a",function(b){b.preventDefault();a($(b.currentTarget));var c=!m;b="my"==l;(c=!b&&c)&&d.text("");g[b?"removeClass":"addClass"]("hide");g.next()[b?"removeClass":"addClass"]("hide");$(".create-btn").toggleClass("disabled",c)});$("#body").on("click",".copy-btn",function(a){c.select();document.execCommand("copy");a=c.parent();J(a[0]);a.addClass("copied")}).on(H,".copied-label",
function(a){c.parent().removeClass("copied")}).on("click",".cancel-btn",function(a){a.preventDefault();e.history.back()}).on("click",".create-btn",function(a){a.preventDefault();Ta(m,"my"==l,f,function(a){"string"==$.type(a)?showAlert($("#body"),a,"alert-danger"):(a=a[1],1==c.data("plain")&&(a=a+(0<=a.indexOf("?")?"&":"?")+"f=plain"),c[0].value=a,$("body").addClass("link-created"))})})}function pa(a){$("#notification")[0]&&notification.init(a);T()}function T(){var a=$("#header .navbar-collapse");
$("#menu-toggle").click(function(){var b=a.hasClass("in");a[b?"removeClass":"addClass"]("in");$(this)[b?"removeClass":"addClass"]("open");$(".qr-collapse-navbar,.qr-collapse-navbar-768")[b?"removeClass":"addClass"]("navbar-fixed-bottom")})}function La(){function a(a){$(a.currentTarget).append(g)}var b=$("#notification"),c=$("#home-noti"),d=c.find(".notification-count"),g=b.parent().find(".arrow-dropdown-menu");notification.init();b.parent().on("show.bs.dropdown",a);c.parent().on("show.bs.dropdown",
a).on("shown.bs.dropdown",function(a){b.parent().trigger("shown.bs.dropdown")});b.on("updateNotificationCount",function(a,b){c[0<b?"addClass":"removeClass"]("hasNew");d.html(b)});var e=$(g.find(".dropdown-header")[0].lastChild).text().trim();da(c[0],e)}function ma(){function a(){var a=f.find(".item.active").next();b("next",a.length?a:l.first())}function b(a,b){if(!b.hasClass("active")){g=!0;var c=f.find(".item.active"),k="next"==a?"left":"right";h.find(".active").removeClass("active");$(h.children()[b.index()]).addClass("active");
b.addClass(a);J(b[0]);c.addClass(k);b.addClass(k);c.one(H,function(d){$(d.target).hasClass(k)&&(b.parent().find(".active").removeClass("active"),b.removeClass([a,k].join(" ")).addClass("active"),c.removeClass(["active",k].join(" ")),g=!1)})}}var c,d=!1,g=!1,h=$(".carousel-indicators"),f=h.parent(),l=f.find(".item");e.cycle=function(b){b||(d=!1);c=clearInterval(c);d||(c=setInterval(a,5E3))};h.on("click","li",function(a){var c=$(a.currentTarget);a=h.find(".active").index();c=c.index();g||a==c||b(c>
a?"next":"prev",l.eq(c))});f.on("mouseenter",function(a){a||(d=!0);f.find(".next, .prev").length&&(f.trigger(H),cycle(!0));c=clearInterval(c)}).on("mouseleave",cycle)}function la(){function a(){for(var a=b.scrollTop(),d=b.height(),g=0;g<sections.length;g++){var h=$(sections[g]);0!=a&&a+.7*d>h.offset().top&&(h=$(h[0]),h.hasClass("active")||(h.addClass("active"),h.hasClass("freezeframe")?h[0].play():h.hasClass("carousel")&&e.cycle&&cycle()))}}var b=$(e);sections=[];$(".freezeframe").each(function(){sections.push(this)});
$(".testimonial-sec .carousel").each(function(){sections.push(this)});e.addEventListener?e.addEventListener("scroll",a,!1):e.attachEvent&&e.attachEvent("onscroll",a)}var u=e.navigator.userAgent.toLowerCase(),I=e.navigator.platform.toLowerCase(),q=e.document.documentElement;e.browser={};browser.mobile=/android|iphone|ipad/.test(u)||/iphone|ipad/.test(I);browser.ios=/iphone|ipad/.test(u)||/iphone|ipad/.test(I);browser.android=/android/.test(u);browser.macOS=/mac os /.test(u);browser.touch=browser.mobile||
browser.macOS&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;for(var I=[["ie",/(msie) ([\w.]+)/],["ie",/trident\/.+(rv:)([\w.]+)/],["edge",/(edge)\/([\w.]+)/],["firefox",/(firefox)\/([\w.]+)/],["chrome",/(chrome|crios)[ /]([\w.]+)/],["safari",/(version)\/([\w.]+).*safari/]],V=0;V<I.length;V++){var W=I[V],sa=W[1].exec(u);if(sa){browser[W[0]]=!0;browser.version=parseFloat(sa[2]);$(q).addClass(W[0]);break}}browser.mobile&&$(q).addClass("mobile");browser.ios&&$(q).addClass("ios");browser.touch&&
$(q).addClass("touch");browser.android&&(u=e.screen,$(q).addClass(640<u.width&&640<u.height?"android-tablet":"android-mobile"));"ontouchstart"in q||$(q).addClass("no-touch");e.cacheDal=!e.indexedDB||browser.safari&&10>browser.version?xa():wa();String.prototype.startsWith||(String.prototype.startsWith=function(a,b){b=b||0;return this.indexOf(a,b)===b});var ta=0>location.protocol.indexOf("http"),ua="http:"!=location.protocol,H="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";e.currentUser=
function(){return P()||""};e.activeOid=function(){return $("body").data("atv-id")||""};e.hiliteSyntax=function(a){e.hljs&&$("pre code",a).each(function(a,c){hljs.highlightBlock(c)})};var y,X=function(a,b){this.x=a;this.y=b};X.prototype.distanceTo=function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};e.ntGetApp=function(a){var b=sessRefer();b&&sendQS([Za,[b]],ea,ea);gae("new","get",a);browser.mobile&&gacvt()};e.sendQS=function(a,b,c){var d=$("body").data("qs")||"qs";return $.ajax({type:"POST",
url:(ta?"https://quire.io/":"/")+d,data:JSON.stringify(a),contentType:"application/json;charset=UTF-8"}).done(b).fail(function(a){c?c(a):(a=netErrorMsg(a))&&showAlert($("#body"),a,"alert-danger")})};e.netErrorMsg=function(a){switch(a.status){case 0:return"networkErrorM"in e?networkErrorM:"Unable to reach Quire. Please check your internet connection.";case 403:return"e403M"in e?e403M:"Sorry, you're not allowed to access this feature.";case 404:return"e404M"in e?e404M:"Sorry, we couldn't find what you're looking for.";
case 413:return"e413M"in e?e413M:"Sorry, your request is too large.";default:return"internalErrorM"in e?internalErrorM:"Sorry, we encountered an unexpected error."}};e.showTooltip=function(a,b,c){ba(a,b,c)};e.clearTooltip=function(){K()};var Y;e.showAlert=function(a,b,c){if(a){"string"==typeof a&&(a=$(a)[0]);clearAlert();var d=$(a).children(".alert-wrapper");d.length||(d=$('<div class="row alert-wrapper"><div class="container"><div class="alert fade"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><p></p></div></div></div>'),
$(a).prepend(d),$(document).on("click",function(a){clearAlert()}),d.on("click",".alert",function(a){$(a.target).hasClass("close")||a.stopPropagation()}));a=d.find(".alert");a.length||(a=Y,d.find(".container").append(a));a.attr("class","alert fade "+(c?c:""));a.find("p").html(b);a.addClass("in");Y=a}};e.clearAlert=function(){$(Y).removeClass("in").remove()};e.getClipboardData=function(a){a=a.clipboardData&&a.clipboardData.items;var b=[];if(a)for(var c=a.length;0<=--c;)b.push(a[c]);return b};e.getPastedData=
function(a){a.stopPropagation();a.preventDefault();a=a.clipboardData||e.clipboardData;return[a.getData("text/html"),a.getData("text/plain")]};e.getClipboardText=function(a,b){navigator.clipboard.readText().then(a).catch(b)};e.reloadPage=function(){e.location.reload(!0)};e.jqSearch=function(a){var b=new Mark("body");b.unmark();a&&b.mark(a,{separateWordSearch:!1,filter:function(a){return 0<a.parentNode.offsetWidth}})};e.contUri=function(){var a=/[?&]continue=([^&]+)(&.*)?$/.exec(location.search);return null!=
a?decodeURIComponent(a[1]):null};e.readS3=function(){return Z()?ya:aa};var Za="gtApp",Ba="Now",Ca="Mins",Da="Hr",Ea="Hrs",Fa="Day",Ga="Days",fa=!1;e.dataLayer=e.dataLayer||[];e.gtag=function(){dataLayer.push(arguments)};e.gacvt=function(a){gtag("event","conversion",{send_to:"AW-1067329176/mNg6CJvTqoEBEJjN-PwD",event_callback:function(){"undefined"!=typeof a&&(e.location=a)}});return!1};var va=/^(\/[wuvc]|r\/setting|apps\/dev\/)(\/.*)?$/,q=e.location.pathname,u=va.test(q);ua&&!/^\/r\/.+\/confirm/i.test(q)?
(gtag("js",new Date),gtag("config","UA-48347893-1",u?{send_page_view:!1}:{}),u||gtag("config","AW-1067329176"),(q=currentUser())&&gtag("set",{user_id:q})):e["ga-disable-UA-48347893-1"]=!0;e.gae=function(a,b,c,d){gtag("event",b,{event_category:a,event_label:c||"",value:d||0})};e.gapg=function(a,b){var c=a.match(va);null!=c&&(a=b=c[1]);c={};c["/"==a.substring(0)?"page_path":"page_location"]=a;b&&(c.page_title=b);gtag("config","UA-48347893-1",c)};e.gaWS=function(a,b,c){gae("ws",a,b,c)};e.logError=function(a,
b,c){c&&(b=b+"\n"+c);gae("error",a,b);console.log("["+a+"] "+b)};e.gdrive=function(){function a(a){if(!e.isVisible()){var b=null;a[google.picker.Response.ACTION]==google.picker.Action.PICKED&&(b=a[google.picker.Response.DOCUMENTS]);d(b)}}function b(){e=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView((new google.picker.DocsView(google.picker.ViewId.DOCS)).setMode(google.picker.DocsViewMode.LIST).setIncludeFolders(!0)).addView((new google.picker.DocsView(google.picker.ViewId.DOCS)).setEnableTeamDrives(!0)).setOAuthToken(g).setCallback(a).build();
e.setVisible(!0)}function c(a){a&&!a.error&&(g=a.access_token,gapi.load("picker",{callback:b}))}var d,g,e;return{cid:"945756434190-"+(ua?"79dh21cr8shodd2407bq8rvqdnfu7abo":"lv1n6lpgk3tmkad1kh88tlovij811inc")+".apps.googleusercontent.com",openPicker:function(a){d=a;gapi.auth.authorize({client_id:gdrive.cid,scope:"https://www.googleapis.com/auth/drive.file",immediate:!1},c)}}}();(function(){function a(a){a=d.json?JSON.stringify(a):String(a);return d.raw?a:encodeURIComponent(a)}function b(a,b){var f;
if(d.raw)f=a;else a:{var e=a;0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{e=decodeURIComponent(e.replace(c," "));f=d.json?JSON.parse(e):e;break a}catch(m){}f=void 0}return $.isFunction(b)?b(f):f}var c=/\+/g,d=$.cookie=function(c,e,f){if(void 0!==e&&!$.isFunction(e)){f=$.extend({},d.defaults,f);if("number"===typeof f.expires){var l=f.expires,m=f.expires=new Date;m.setTime(+m+864E5*l)}return document.cookie=[d.raw?c:encodeURIComponent(c),"=",a(e),f.expires?"; expires="+
f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}f=c?void 0:{};for(var l=document.cookie?document.cookie.split("; "):[],m=0,r=l.length;m<r;m++){var n=l[m].split("="),k;k=n.shift();k=d.raw?k:decodeURIComponent(k);n=n.join("=");if(c&&c===k){f=b(n,e);break}c||void 0===(n=b(n))||(f[k]=n)}return f};d.defaults={};$.removeCookie=function(a,b){if(void 0===$.cookie(a))return!1;$.cookie(a,"",$.extend({},b,{expires:-1}));return!$.cookie(a)}})();
(function(){function a(a,d){var e=$(a.target);(a.which!=b.ENTER||!e.is(":button")&&!e.is("textarea"))&&(e=$(a.currentTarget).find('[data-hotkey*="'+d+'"]')[0])&&e.click()}var b={ENTER:13,ESC:27};$(document).on("keydown",".modal.in,.full-dialog",function(c){switch(c.which){case b.ENTER:a(c,"enter");break;case b.ESC:a(c,"escape")}})})();(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define(b):a.Mark=b()})(this,function(){var a=
"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},c=function(){function a(b,c){for(var n=0;n<c.length;n++){var k=c[n];k.enumerable=k.enumerable||!1;k.configurable=!0;"value"in k&&(k.writable=!0);Object.defineProperty(b,k.key,k)}}return function(b,c,n){c&&
a(b.prototype,c);n&&a(b,n);return b}}(),d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],n;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(a[n]=c[n])}return a},g=function(){function a(m){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5E3;b(this,a);this.ctx=m;this.iframes=c;this.exclude=n;this.iframesTimeout=k}c(a,[{key:"getContexts",
value:function(){var a=void 0,b=[],a="undefined"!==typeof this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"===typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[];a.forEach(function(a){var m=0<b.filter(function(b){return b.contains(a)}).length;-1!==b.indexOf(a)||m||b.push(a)});return b}},{key:"getIframeContents",value:function(a,b){var c=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:function(){},k=void 0;try{var d=a.contentWindow,k=d.document;if(!d||!k)throw Error("iframe inaccessible");}catch(e){c()}k&&b(k)}},{key:"isIframeBlank",value:function(a){var b=a.getAttribute("src").trim();return"about:blank"===a.contentWindow.location.href&&"about:blank"!==b&&b}},{key:"observeIframeLoad",value:function(a,b,c){var k=this,d=!1,e=null,f=function $a(){if(!d){d=!0;clearTimeout(e);try{k.isIframeBlank(a)||(a.removeEventListener("load",$a),k.getIframeContents(a,b,
c))}catch(f){c()}}};a.addEventListener("load",f);e=setTimeout(f,this.iframesTimeout)}},{key:"onIframeReady",value:function(a,b,c){try{"complete"===a.contentWindow.document.readyState?this.isIframeBlank(a)?this.observeIframeLoad(a,b,c):this.getIframeContents(a,b,c):this.observeIframeLoad(a,b,c)}catch(k){c()}}},{key:"waitForIframes",value:function(a,b){var c=this,k=0;this.forEachIframe(a,function(){return!0},function(a){k++;c.waitForIframes(a.querySelector("html"),function(){--k||b()})},function(a){a||
b()})}},{key:"forEachIframe",value:function(b,c,n){var k=this,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},e=b.querySelectorAll("iframe"),f=e.length,g=0,e=Array.prototype.slice.call(e),h=function(){0>=--f&&d(g)};f||h();e.forEach(function(b){if(a.matches(b,k.exclude))h();else k.onIframeReady(b,function(a){c(b)&&(g++,n(a));h()},h)})}},{key:"createIterator",value:function(a,b,c){return document.createNodeIterator(a,b,c,!1)}},{key:"createInstanceOnIframe",value:function(b){return new a(b.querySelector("html"),
this.iframes)}},{key:"compareNodeIframe",value:function(a,b,c){if(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_PRECEDING)if(null!==b){if(b.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(a){var b=a.previousNode(),c=void 0,c=null===b?a.nextNode():a.nextNode()&&a.nextNode();return{prevNode:b,node:c}}},{key:"checkIframeFilter",value:function(a,b,c,k){var d=!1,e=!1;k.forEach(function(a,b){a.val===c&&(d=b,e=a.handled)});
if(this.compareNodeIframe(a,b,c))return!1!==d||e?!1===d||e||(k[d].handled=!0):k.push({val:c,handled:!0}),!0;!1===d&&k.push({val:c,handled:!1});return!1}},{key:"handleOpenIframes",value:function(a,b,c,k){var d=this;a.forEach(function(a){a.handled||d.getIframeContents(a.val,function(a){d.createInstanceOnIframe(a).forEachNode(b,c,k)})})}},{key:"iterateThroughNodes",value:function(a,b,c,d,e){for(var f=this,g=this.createIterator(b,a,d),h=[],l=[],v=void 0,z=void 0,A=function(){var a=f.getIteratorNode(g);
z=a.prevNode;return v=a.node};A();)this.iframes&&this.forEachIframe(b,function(a){return f.checkIframeFilter(v,z,a,h)},function(b){f.createInstanceOnIframe(b).forEachNode(a,function(a){return l.push(a)},d)}),l.push(v);l.forEach(function(a){c(a)});this.iframes&&this.handleOpenIframes(h,a,c,d);e()}},{key:"forEachNode",value:function(a,b,c){var d=this,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},f=this.getContexts(),g=f.length;g||e();f.forEach(function(f){var h=function(){d.iterateThroughNodes(a,
f,b,c,function(){0>=--g&&e()})};d.iframes?d.waitForIframes(f,h):h()})}}],[{key:"matches",value:function(a,b){var c="string"===typeof b?[b]:b,d=a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;if(d){var e=!1;c.every(function(b){return d.call(a,b)?(e=!0,!1):!0});return e}return!1}}]);return a}(),h=function(){function a(c){b(this,a);this.opt=d({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],
wildcards:"disabled"},c)}c(a,[{key:"create",value:function(a){"disabled"!==this.opt.wildcards&&(a=this.setupWildcardsRegExp(a));a=this.escapeStr(a);Object.keys(this.opt.synonyms).length&&(a=this.createSynonymsRegExp(a));if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.setupIgnoreJoinersRegExp(a);this.opt.diacritics&&(a=this.createDiacriticsRegExp(a));a=this.createMergedBlanksRegExp(a);if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.createJoinersRegExp(a);"disabled"!==
this.opt.wildcards&&(a=this.createWildcardsRegExp(a));a=this.createAccuracyRegExp(a);return new RegExp(a,"gm"+(this.opt.caseSensitive?"":"i"))}},{key:"escapeStr",value:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createSynonymsRegExp",value:function(a){var b=this.opt.synonyms,c=this.opt.caseSensitive?"":"i",d=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\x00":"",e;for(e in b)if(b.hasOwnProperty(e)){var f=b[e],g="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(e):
this.escapeStr(e),f="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(f):this.escapeStr(f);""!==g&&""!==f&&(a=a.replace(new RegExp("("+this.escapeStr(g)+"|"+this.escapeStr(f)+")","gm"+c),d+("("+this.processSynonyms(g)+"|")+(this.processSynonyms(f)+")")+d))}return a}},{key:"processSynonyms",value:function(a){if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.setupIgnoreJoinersRegExp(a);return a}},{key:"setupWildcardsRegExp",value:function(a){a=a.replace(/(?:\\)*\?/g,function(a){return"\\"===
a.charAt(0)?"?":"\u0001"});return a.replace(/(?:\\)*\*/g,function(a){return"\\"===a.charAt(0)?"*":"\u0002"})}},{key:"createWildcardsRegExp",value:function(a){var b="withSpaces"===this.opt.wildcards;return a.replace(/\u0001/g,b?"[\\S\\s]?":"\\S?").replace(/\u0002/g,b?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(a){return a.replace(/[^(|)\\]/g,function(a,b,c){b=c.charAt(b+1);return/[(|)\\]/.test(b)||""===b?a:a+"\x00"})}},{key:"createJoinersRegExp",value:function(a){var b=[],
c=this.opt.ignorePunctuation;Array.isArray(c)&&c.length&&b.push(this.escapeStr(c.join("")));this.opt.ignoreJoiners&&b.push("\\u00ad\\u200b\\u200c\\u200d");return b.length?a.split(/\u0000+/).join("["+b.join("")+"]*"):a}},{key:"createDiacriticsRegExp",value:function(a){var b=this.opt.caseSensitive?"":"i",c=this.opt.caseSensitive?"a\u00e0\u00e1\u1ea3\u00e3\u1ea1\u0103\u1eb1\u1eaf\u1eb3\u1eb5\u1eb7\u00e2\u1ea7\u1ea5\u1ea9\u1eab\u1ead\u00e4\u00e5\u0101\u0105 A\u00c0\u00c1\u1ea2\u00c3\u1ea0\u0102\u1eb0\u1eae\u1eb2\u1eb4\u1eb6\u00c2\u1ea6\u1ea4\u1ea8\u1eaa\u1eac\u00c4\u00c5\u0100\u0104 c\u00e7\u0107\u010d C\u00c7\u0106\u010c d\u0111\u010f D\u0110\u010e e\u00e8\u00e9\u1ebb\u1ebd\u1eb9\u00ea\u1ec1\u1ebf\u1ec3\u1ec5\u1ec7\u00eb\u011b\u0113\u0119 E\u00c8\u00c9\u1eba\u1ebc\u1eb8\u00ca\u1ec0\u1ebe\u1ec2\u1ec4\u1ec6\u00cb\u011a\u0112\u0118 i\u00ec\u00ed\u1ec9\u0129\u1ecb\u00ee\u00ef\u012b I\u00cc\u00cd\u1ec8\u0128\u1eca\u00ce\u00cf\u012a l\u0142 L\u0141 n\u00f1\u0148\u0144 N\u00d1\u0147\u0143 o\u00f2\u00f3\u1ecf\u00f5\u1ecd\u00f4\u1ed3\u1ed1\u1ed5\u1ed7\u1ed9\u01a1\u1edf\u1ee1\u1edb\u1edd\u1ee3\u00f6\u00f8\u014d O\u00d2\u00d3\u1ece\u00d5\u1ecc\u00d4\u1ed2\u1ed0\u1ed4\u1ed6\u1ed8\u01a0\u1ede\u1ee0\u1eda\u1edc\u1ee2\u00d6\u00d8\u014c r\u0159 R\u0158 s\u0161\u015b\u0219\u015f S\u0160\u015a\u0218\u015e t\u0165\u021b\u0163 T\u0164\u021a\u0162 u\u00f9\u00fa\u1ee7\u0169\u1ee5\u01b0\u1eeb\u1ee9\u1eed\u1eef\u1ef1\u00fb\u00fc\u016f\u016b U\u00d9\u00da\u1ee6\u0168\u1ee4\u01af\u1eea\u1ee8\u1eec\u1eee\u1ef0\u00db\u00dc\u016e\u016a y\u00fd\u1ef3\u1ef7\u1ef9\u1ef5\u00ff Y\u00dd\u1ef2\u1ef6\u1ef8\u1ef4\u0178 z\u017e\u017c\u017a Z\u017d\u017b\u0179".split(" "):
"a\u00e0\u00e1\u1ea3\u00e3\u1ea1\u0103\u1eb1\u1eaf\u1eb3\u1eb5\u1eb7\u00e2\u1ea7\u1ea5\u1ea9\u1eab\u1ead\u00e4\u00e5\u0101\u0105A\u00c0\u00c1\u1ea2\u00c3\u1ea0\u0102\u1eb0\u1eae\u1eb2\u1eb4\u1eb6\u00c2\u1ea6\u1ea4\u1ea8\u1eaa\u1eac\u00c4\u00c5\u0100\u0104 c\u00e7\u0107\u010dC\u00c7\u0106\u010c d\u0111\u010fD\u0110\u010e e\u00e8\u00e9\u1ebb\u1ebd\u1eb9\u00ea\u1ec1\u1ebf\u1ec3\u1ec5\u1ec7\u00eb\u011b\u0113\u0119E\u00c8\u00c9\u1eba\u1ebc\u1eb8\u00ca\u1ec0\u1ebe\u1ec2\u1ec4\u1ec6\u00cb\u011a\u0112\u0118 i\u00ec\u00ed\u1ec9\u0129\u1ecb\u00ee\u00ef\u012bI\u00cc\u00cd\u1ec8\u0128\u1eca\u00ce\u00cf\u012a l\u0142L\u0141 n\u00f1\u0148\u0144N\u00d1\u0147\u0143 o\u00f2\u00f3\u1ecf\u00f5\u1ecd\u00f4\u1ed3\u1ed1\u1ed5\u1ed7\u1ed9\u01a1\u1edf\u1ee1\u1edb\u1edd\u1ee3\u00f6\u00f8\u014dO\u00d2\u00d3\u1ece\u00d5\u1ecc\u00d4\u1ed2\u1ed0\u1ed4\u1ed6\u1ed8\u01a0\u1ede\u1ee0\u1eda\u1edc\u1ee2\u00d6\u00d8\u014c r\u0159R\u0158 s\u0161\u015b\u0219\u015fS\u0160\u015a\u0218\u015e t\u0165\u021b\u0163T\u0164\u021a\u0162 u\u00f9\u00fa\u1ee7\u0169\u1ee5\u01b0\u1eeb\u1ee9\u1eed\u1eef\u1ef1\u00fb\u00fc\u016f\u016bU\u00d9\u00da\u1ee6\u0168\u1ee4\u01af\u1eea\u1ee8\u1eec\u1eee\u1ef0\u00db\u00dc\u016e\u016a y\u00fd\u1ef3\u1ef7\u1ef9\u1ef5\u00ffY\u00dd\u1ef2\u1ef6\u1ef8\u1ef4\u0178 z\u017e\u017c\u017aZ\u017d\u017b\u0179".split(" "),
d=[];a.split("").forEach(function(e){c.every(function(c){if(-1!==c.indexOf(e)){if(-1<d.indexOf(c))return!1;a=a.replace(new RegExp("["+c+"]","gm"+b),"["+c+"]");d.push(c)}return!0})});return a}},{key:"createMergedBlanksRegExp",value:function(a){return a.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(a){var b=this,c=this.opt.accuracy,d="string"===typeof c?c:c.value,e="";("string"===typeof c?[]:c.limiters).forEach(function(a){e+="|"+b.escapeStr(a)});switch(d){default:return"()("+
a+")";case "complementary":return e="\\s"+(e?e:this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~\u00a1\u00bf")),"()([^"+e+"]*"+a+"[^"+e+"]*)";case "exactly":return"(^|\\s"+e+")("+a+")(?=$|\\s"+e+")"}}}]);return a}(),f=function(){function f(a){b(this,f);this.ctx=a;this.ie=!1;a=e.navigator.userAgent;if(-1<a.indexOf("MSIE")||-1<a.indexOf("Trident"))this.ie=!0}c(f,[{key:"log",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"debug",d=this.opt.log;if(this.opt.debug&&"object"===
("undefined"===typeof d?"undefined":a(d))&&"function"===typeof d[c])d[c]("mark.js: "+b)}},{key:"getSeparatedKeywords",value:function(a){var b=this,c=[];a.forEach(function(a){b.opt.separateWordSearch?a.split(" ").forEach(function(a){a.trim()&&-1===c.indexOf(a)&&c.push(a)}):a.trim()&&-1===c.indexOf(a)&&c.push(a)});return{keywords:c.sort(function(a,b){return b.length-a.length}),length:c.length}}},{key:"isNumeric",value:function(a){return Number(parseFloat(a))==a}},{key:"checkRanges",value:function(a){var b=
this;if(!Array.isArray(a)||"[object Object]"!==Object.prototype.toString.call(a[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(a),[];var c=[],d=0;a.sort(function(a,b){return a.start-b.start}).forEach(function(a){var e=b.callNoMatchOnInvalidRanges(a,d),m=e.start,f=e.end;e.valid&&(a.start=m,a.length=f-m,c.push(a),d=f)});return c}},{key:"callNoMatchOnInvalidRanges",value:function(a,b){var c=void 0,d=void 0,e=!1;a&&"undefined"!==typeof a.start?(c=parseInt(a.start,
10),d=c+parseInt(a.length,10),this.isNumeric(a.start)&&this.isNumeric(a.length)&&0<d-b&&0<d-c?e=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(a)),this.opt.noMatch(a))):(this.log("Ignoring invalid range: "+JSON.stringify(a)),this.opt.noMatch(a));return{start:c,end:d,valid:e}}},{key:"checkWhitespaceRanges",value:function(a,b,c){var d=void 0,e=!0,f=c.length,d=b-f;b=parseInt(a.start,10)-d;b=b>f?f:b;d=b+parseInt(a.length,10);d>f&&(d=f,this.log("End range automatically set to the max value of "+
f));0>b||0>d-b||b>f||d>f?(e=!1,this.log("Invalid range: "+JSON.stringify(a)),this.opt.noMatch(a)):""===c.substring(b,d).replace(/\s+/g,"")&&(e=!1,this.log("Skipping whitespace only range: "+JSON.stringify(a)),this.opt.noMatch(a));return{start:b,end:d,valid:e}}},{key:"getTextNodes",value:function(a){var b=this,c="",d=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(a){d.push({start:c.length,end:(c+=a.textContent).length,node:a})},function(a){return b.matchesExclude(a.parentNode)?NodeFilter.FILTER_REJECT:
NodeFilter.FILTER_ACCEPT},function(){a({value:c,nodes:d})})}},{key:"matchesExclude",value:function(a){return g.matches(a,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(a,b,c){var d=this.opt.element?this.opt.element:"mark";a=a.splitText(b);b=a.splitText(c-b);d=document.createElement(d);d.setAttribute("data-markjs","true");this.opt.className&&d.setAttribute("class",this.opt.className);d.textContent=a.textContent;a.parentNode.replaceChild(d,
a);return b}},{key:"wrapRangeInMappedTextNode",value:function(a,b,c,d,e){var f=this;a.nodes.every(function(g,h){var l=a.nodes[h+1];if("undefined"===typeof l||l.start>b){if(!d(g.node))return!1;var l=b-g.start,v=(c>g.end?g.end:c)-g.start,z=a.value.substr(0,g.start),A=a.value.substr(v+g.start);g.node=f.wrapRangeInTextNode(g.node,l,v);a.value=z+A;a.nodes.forEach(function(b,c){c>=h&&(0<a.nodes[c].start&&c!==h&&(a.nodes[c].start-=v),a.nodes[c].end-=v)});c-=v;e(g.node.previousSibling,g.start);if(c>g.end)b=
g.end;else return!1}return!0})}},{key:"wrapGroups",value:function(a,b,c,d){a=this.wrapRangeInTextNode(a,b,b+c);d(a.previousSibling);return a}},{key:"separateGroups",value:function(a,b,c,d,e){c=b.length;for(var f=1;f<c;f++){var g=a.textContent.indexOf(b[f]);b[f]&&-1<g&&d(b[f],a)&&(a=this.wrapGroups(a,g,b[f].length,e))}return a}},{key:"wrapMatches",value:function(a,b,c,d,e){var f=this,g=0===b?0:b+1;this.getTextNodes(function(b){b.nodes.forEach(function(b){b=b.node;for(var e=void 0;null!==(e=a.exec(b.textContent))&&
""!==e[g];){if(f.opt.separateGroups)b=f.separateGroups(b,e,g,c,d);else{if(!c(e[g],b))continue;var h=e.index;if(0!==g)for(var l=1;l<g;l++)h+=e[l].length;b=f.wrapGroups(b,h,e[g].length,d)}a.lastIndex=0}});e()})}},{key:"wrapMatchesAcrossElements",value:function(a,b,c,d,e){var f=this,g=0===b?0:b+1;this.getTextNodes(function(b){for(var h=void 0;null!==(h=a.exec(b.value))&&""!==h[g];){var l=h.index;if(0!==g)for(var r=1;r<g;r++)l+=h[r].length;f.wrapRangeInMappedTextNode(b,l,l+h[g].length,function(a){return c(h[g],
a)},function(b,c){a.lastIndex=c;d(b)})}e()})}},{key:"wrapRangeFromIndex",value:function(a,b,c,d){var e=this;this.getTextNodes(function(f){var g=f.value.length;a.forEach(function(a,d){var h=e.checkWhitespaceRanges(a,g,f.value),k=h.start,m=h.end;h.valid&&e.wrapRangeInMappedTextNode(f,k,m,function(c){return b(c,a,f.value.substring(k,m),d)},function(b){c(b,a)})});d()})}},{key:"unwrapMatches",value:function(a){for(var b=a.parentNode,c=document.createDocumentFragment();a.firstChild;)c.appendChild(a.removeChild(a.firstChild));
b.replaceChild(c,a);this.ie?this.normalizeTextNode(b):b.normalize()}},{key:"normalizeTextNode",value:function(a){if(a){if(3===a.nodeType)for(;a.nextSibling&&3===a.nextSibling.nodeType;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);else this.normalizeTextNode(a.firstChild);this.normalizeTextNode(a.nextSibling)}}},{key:"markRegExp",value:function(a,b){var c=this;this.opt=b;this.log('Searching with expression "'+a+'"');var d=0,e="wrapMatches";this.opt.acrossElements&&(e=
"wrapMatchesAcrossElements");this[e](a,this.opt.ignoreGroups,function(a,b){return c.opt.filter(b,a,d)},function(a){d++;c.opt.each(a)},function(){0===d&&c.opt.noMatch(a);c.opt.done(d)})}},{key:"mark",value:function(a,b){var c=this;this.opt=b;var d=0,e="wrapMatches",f=this.getSeparatedKeywords("string"===typeof a?[a]:a),g=f.keywords,l=f.length,f=function v(a){var b=(new h(c.opt)).create(a),f=0;c.log('Searching with expression "'+b+'"');c[e](b,1,function(b,e){return c.opt.filter(e,a,d,f)},function(a){f++;
d++;c.opt.each(a)},function(){0===f&&c.opt.noMatch(a);g[l-1]===a?c.opt.done(d):v(g[g.indexOf(a)+1])})};this.opt.acrossElements&&(e="wrapMatchesAcrossElements");0===l?this.opt.done(d):f(g[0])}},{key:"markRanges",value:function(a,b){var c=this;this.opt=b;var d=0,e=this.checkRanges(a);e&&e.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(e)),this.wrapRangeFromIndex(e,function(a,b,d,e){return c.opt.filter(a,b,d,e)},function(a,b){d++;c.opt.each(a,b)},function(){c.opt.done(d)})):
this.opt.done(d)}},{key:"unmark",value:function(a){var b=this;this.opt=a;var c=this.opt.element?this.opt.element:"*",c=c+"[data-markjs]";this.opt.className&&(c+="."+this.opt.className);this.log('Removal selector "'+c+'"');this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(a){b.unwrapMatches(a)},function(a){var d=g.matches(a,c);a=b.matchesExclude(a);return!d||a?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(a){this._opt=d({},{element:"",className:"",
exclude:[],iframes:!1,iframesTimeout:5E3,separateWordSearch:!0,acrossElements:!1,ignoreGroups:0,each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:e.console},a)},get:function(){return this._opt}},{key:"iterator",get:function(){return new g(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]);return f}();return function(a){var b=this,c=new f(a);this.mark=function(a,d){c.mark(a,d);return b};this.markRegExp=function(a,d){c.markRegExp(a,
d);return b};this.markRanges=function(a,d){c.markRanges(a,d);return b};this.unmark=function(a){c.unmark(a);return b};return this}});var L="busy_mask",ja=function(a){this.$e=$(a);this.mask=$('<div class="loading-mask"></div>');this.$e.data(L,this);this.$e.is("body")?this.$e.append(this.mask):(this.$e.after(this.mask),a=this.$e[0],this.mask.css("width",a.offsetWidth+"px").css("height",a.offsetHeight+"px").css("left",a.offsetLeft+"px").css("top",a.offsetTop+"px"))};ja.prototype.destroy=function(){this.mask.remove();
this.$e.data(L,null)};e.showBusy=function(a,b){a||(a=document.body);b?ha(a):($(a).data("delay_busy_mask",!0),setTimeout(function(){null!=$(a).data("delay_busy_mask")&&ha(a)},500))};e.clearBusy=function(a){a||(a=document.body);$(a).data("delay_busy_mask",null);$(a).removeClass("loading-mask-cover");ia(a)};e.notification=function(){function a(){F(w,[y,v,z,1])}function b(){for(var a=G(u)||[],b=readS3(),c=0,d=a.length;c<d;c++){var e=a[c].createdBy;e.image=b(e.image)}return a}function c(a){for(var b=Z()?
za:aa,c=0,d=a.length;c<d;c++){var e=a[c].createdBy;e.image=b(e.image)}F(u,a)}function d(d,f){if(!A){var m=currentUser();u="notifs:"+m;w="notf.rd:"+m;e.loadedNotisBeforeOpen=b();m=G(w)||[];y=m[0];v=m[1]||0;z=m[2]||0;1==m[3]&&loadedNotisBeforeOpen.length||(y=z=null,c([]),a());A=$(f||"#notification");var n=A.parent(),m=n.find(".arrow-dropdown-menu");D=m.find(".mk-rd-btn");C=A.find(".notification-count");x=n.find(".ntf-list");B=new p(x.parent().parent()[0]);m.on("click","li",function(a){if(!$(a.target).closest("a")[0]){var b=
$(a.currentTarget).data("url");b?(a=$('<a href="'+b+'"></a>').appendTo(document.body),a[0].click(),a.remove()):a.stopPropagation()}}).on("click",".mk-rd-btn",function(a){l();a.stopPropagation();a.preventDefault()}).on("click",".notification-action a",function(a){n.removeClass("open")}).on("click",".scroller-btn",function(a){a.target.blur();t&&clearTimeout(t);x.parent().removeClass("scroll-hint");t=null;B.scrollToTop()});n.on("shown.bs.dropdown",h);m=$(n.find(".arrow-dropdown-menu .dropdown-header")[0].lastChild).text().trim();
da(A[0],m);d||(g(),setInterval(g,k))}}function g(){if("hidden"==document.visibilityState){if(0<--q)return;q=15}sendQS(["notif.cnt",Ia()],n,function(a){E&&E(a)})}function h(){K();x.parent().addClass("loading");f(!0)}function f(d){sendQS(["notifs",[y,v,d]],function(e){var f=e.shift();z=Math.max(z||0,f.loadAt||0);y=Math.max(z,y||0,e[0]?e[0].createdAt.epoch||0:0);var g=b(),h=v!=f.markAt;v=f.markAt;delete f.loadAt;delete f.markAt;if(g.length&&e.length){for(var l=[],k=0,n=e.length;k<n;k++){var r=e[k],p;
a:{p=r.url;for(var q=r.createdAt.epoch,t=0,u=g.length;t<u;t++){var w=g[t];if(q==w.createdAt.epoch&&p==w.url){p=!0;break a}}p=void 0}p||l.push(r)}e=l}loadedNotisBeforeOpen=g=$.merge(e,g);for(var x in f)for(k=0,n=g.length;k<n;k++)e=g[k],e.oid==x&&f[x]>=e.createdAt.epoch&&delete e.unread;f=g.length-150;0<f&&g.splice(150,f);if(h)for(h=g,f=0,k=h.length;f<k;f++)n=h[f],n.createdAt.epoch<=v&&delete n.unread;g.length&&c(g);a();d&&m()},function(a){d&&m()})}function l(){var c=b();c.length&&(c=c[0].createdAt.epoch,
v!=c&&(v=c,a(),sendQS(["notif.rd",v],function(){r()},function(a){r()})))}function m(c){x.parent().removeClass("loading").removeClass("scroll-hint");x.empty();var d=b(),e=d.length,f;if(e){var g=x.parent()[0],h=g.scrollHeight,l=[],k=!1;f=g.scrollTop;for(var m=0,r=d.length;m<r;m++){var p=d[m],q=p.createdBy,t=p.createdAt,u=t.epoch,t=Aa(u)||t.message,w=u>z;(u=w||p.unread&&u>v)&&(k=!0);$.merge(l,['<li class="notification-item ',u?w?"trans":"old":"read",'" data-url="',p.url,'">',R(q.image,q.name,q.initials,
q.iconColor,"x40","pull-left circle"),'<div class="desc">','<div class="notification-action">',p.message,"</div>",'<div class="notification-time">',t,"</div>","</div>","</li>"])}x.html(l.join(""));60<f?(f+=g.scrollHeight-h,x.find(".trans").length&&(x.parent().addClass("scroll-hint"),x.find(".trans").removeClass("trans"))):x.find(".trans").each(function(){var a=$(this),b=this.offsetHeight;a.one(H,function(b){a.removeClass("trans in").css("height","")});a.height(0);J(this);a.height(b);setTimeout(function(){$(this).addClass("in")},
0)})}else f=0;c||(n(0),e&&(c=d[0].createdAt.epoch,z!=c&&(z=c,a())));D[k?"removeClass":"addClass"]("hide");B.scrollTo(f);B.syncSize(500)}function r(){var a=b();if(a.length){for(var d=x.children(),e=0,f=d.length;e<f;e++)$(d[e]).addClass("read").removeClass("old"),delete a[e].unread;D.addClass("hide");c(a)}}function n(a){var b=C.html();b&&parseInt(b)==a||(A[0<a?"addClass":"removeClass"]("hasNew"),C.html(a),A.trigger("updateNotificationCount",[a]),0<a&&f(!1))}var k=ta?1E5:6E4,q=15,t,u,w,y,v,z,A,C,x,D,
B,E;e.setNotifCount=function(a){currentUser()&&(d(),n(a))};e.openNotification=function(){d();h()};e.extensionInit=function(a,b){E=b;d(!1,a)};return{init:function(a){d(a)}}}();var M="rfr.sent";e.sessRefer=function(){return B("rfr",!1)||""};var q=document.referrer,w;/[?&]gclid=/.test(w=location.href)&&(q=(q||"")+w.substring(w.indexOf("?")));q&&0>q.indexOf("//"+location.host)&&C("rfr",q,!1);var p=function(a,b){this.$e=$(a);this.options=$.extend({},p.DEFAULTS,b);this.full=this.sizeDirty=!1;this.init()};
p.DEFAULTS={horizontal:!1,visible:"hover",detectResize:!0,wheelRate:.2,preventDefault:!0};p.prototype.init=function(){var a=this.$e,b=a[0],c=this.options,d=this,g=c.horizontal;a.addClass("scrolled").addClass(g?"horizontal":"vertical");"static"==e.getComputedStyle(b,null).getPropertyValue("position")&&(b.style.position="relative");this.inner=a.children()[0];this.bar=b=$('<div class="scroller"><div class="scroller-track"><div class="scroller-handle"></div></div></div>');b.addClass("visible-"+c.visible);
a.append(b);this.track=b.find(".scroller-track")[0];this.handle=b.find(".scroller-handle")[0];if(browser.mobile)$(this.inner).on("touchmove",function(a){a.stopPropagation()}).on("scroll",function(b){d.syncPosition();a.trigger("scroll")});else{var h=new O(b[0],{dragTarget:".scroller-handle",renderer:new D(this),ignore:function(){return d.full}});a.on("click",".scroller-track",function(a){if(a.target!=d.handle){var b=a.originalEvent,b=g?b.offsetX:b.offsetY;b||(b=$(a.target).offset(),b=g?a.pageX-b.left:
a.pageY-b.top);d.scrollTo(Math.round((b-d.handleSize()/2)*d.contentSize/d.trackSize()))}}).on(browser.firefox?"DOMMouseScroll":"mousewheel",function(a){d.full||h.dragging||(a=a.originalEvent,d.scrollBy(Math.round((browser.firefox?40*a.detail:-a.wheelDelta)*c.wheelRate)),c.preventDefault&&a.preventDefault())})}if(c.detectResize)$(e).on("resize",function(a){d.syncSize(500)});this.syncSize()};p.prototype.scrollBy=function(a){this.scrollTo(a+this.position())};p.prototype.scrollTo=function(a){this.contentSize&&
(a=Math.max(0,Math.min(this.boundPosition(),a)),$(this.inner)[this.options.horizontal?"scrollLeft":"scrollTop"](a),this.syncPosition(a),this.$e.trigger("scroll"))};p.prototype.scrollToTop=function(){S(this,0,this.inner.scrollTop,0-this.inner.scrollTop,500)};p.prototype.scrollToBottom=function(){S(this,0,this.inner.scrollTop,this.boundPosition-this.inner.scrollTop,500)};p.prototype.position=function(){return this.inner[this.options.horizontal?"scrollLeft":"scrollTop"]};p.prototype.trackSize=function(){this._trackSize||
(this._trackSize=this.options.horizontal?this.track.offsetWidth:this.track.offsetHeight);return this._trackSize};p.prototype.handleSize=function(){this._handleSize||(this._handleSize=this.options.horizontal?this.handle.offsetWidth:this.handle.offsetHeight);return this._handleSize};p.prototype.boundPosition=function(){return this.contentSize?Math.max(0,this.contentSize-this.viewportSize):0};p.prototype.syncSize=function(a){if(a){this.sizeDirty=!0;var b=this;setTimeout(function(){b.sizeDirty&&b._syncSize();
b.sizeDirty=!1},a)}else this._syncSize()};p.prototype._syncSize=function(){this[this.options.horizontal?"_syncWidth":"_syncHeight"]()};p.prototype._syncWidth=function(){var a=this.contentSize=this.inner.scrollWidth,b=this.viewportSize=this.inner.clientWidth;this._trackSize=this._handleSize=null;this.full=b>=a;this.bar[this.full?"addClass":"removeClass"]("full");this.handle.style.width=b/a*100+"%";this._syncLeft()};p.prototype._syncHeight=function(){var a=this.contentSize=this.inner.scrollHeight,b=
this.viewportSize=this.inner.clientHeight;this._trackSize=this._handleSize=null;this.full=b>=a;this.bar[this.full?"addClass":"removeClass"]("full");this.handle.style.height=b/a*100+"%";this._syncTop()};p.prototype.syncPosition=function(a){this[this.options.horizontal?"_syncLeft":"_syncTop"](a)};p.prototype._syncLeft=function(a){this.handle.style.left=(a||this.inner.scrollLeft)/this.contentSize*100+"%"};p.prototype._syncTop=function(a){this.handle.style.top=(a||this.inner.scrollTop)/this.contentSize*
100+"%"};w=function(){};w.prototype.setup=function(a){this.dragger=a};w.prototype.start=function(a,b){var c=$(b.outerHtml);this.ghost=c;c.addClass("dragger-ghost hide");this.dragger.$e.append(c);$(b).addClass("dragged");c.style.left=b.offsetLeft+"px";c.style.top=b.offsetTop+"px";this.startOffsetLeft=b.offsetLeft-a.clientX;this.startOffsetTop=b.offsetTop-a.clientY;c.removeClass("hide")};w.prototype.move=function(a,b){this.ghost.css({left:this.startOffsetLeft+a.clientX+"px",top:this.startOffsetTop+
a.clientY+"px"})};w.prototype.end=function(a,b){$(b).removeClass("dragged");this.ghost.addClass("hide").remove()};var D=function(a){this.scroller=a};D.prototype=$.extend({},w.prototype);D.prototype.start=function(a,b){e.getSelection?e.getSelection().removeAllRanges():document.selection.createRange&&(document.selection.createRange(),document.selection.empty());$(b).addClass("dragged").parent().parent().addClass("scrolling");this.startPos=this.scroller.position();this.startEventPos=this.scroller.options.horizontal?
a.clientX:a.clientY};D.prototype.move=function(a,b){var c=this.scroller;a.preventDefault();c.scrollTo(this.computeScrollPosition(c.options.horizontal?a.clientX:a.clientY))};D.prototype.computeScrollPosition=function(a){var b=this.scroller;return this.startPos+Math.round((a-this.startEventPos)*b.contentSize/b.trackSize())};D.prototype.end=function(a,b){$(b).removeClass("dragged").parent().parent().removeClass("scrolling")};var O=function(a,b){this.$e=$(a);this.options=$.extend({},O.DEFAULTS,b);this._init=
this.dragging=!1;this.init()};O.DEFAULTS={moveThreshold:3,dragTarget:".dragger-target",ignore:function(a){a=$(a.target);return a.is("input")||a.is("textarea")},renderer:new w};O.prototype.init=function(){var a=this,b=this.options;this.$e.addClass("dragger");b.renderer.setup(this);this.$e.on("mousedown",b.dragTarget,function(c){if(!b.ignore(c)){a._init=!0;var d=c.originalEvent;a.initClientPos=new X(d.clientX,d.clientY);a.dragged=c.currentTarget}});$(document).on("mousemove",function(c){if(a._init||
a.dragging)c=c.originalEvent,a.dragging?b.renderer.move(c,a.dragged):(new X(c.clientX,c.clientY)).distanceTo(a.initClientPos)>b.moveThreshold&&(a._init=!1,a.dragging=!0,b.renderer.start(c,a.dragged))}).on("mouseup",function(c){a.dragging&&c.preventDefault();a._init=!1;a.dragging&&(a.dragging=!1,b.renderer.end(c.originalEvent,a.dragged),a.dragged=null)})};var N="aurld",t=function(a,b,c){this.$element=a;this.$list=b;this.options=$.extend({},t.DEFAULTS,c);this.offset=0;this.currentLen=this.options.pageSize;
this.inp=a.find("input");this.orderBy=this.currentOrg=this.currentCategory=this.currentText=null;var d=this,e,h;a.on("click",".close",function(a){d.inp[0].value="";d.options.dropdown?d.$element.removeClass("dirty").removeClass("open"):d.search();d.inp.focus()}).on("focus","input",function(b){a.addClass("active")}).on("blur","input",function(b){0==d.inp[0].value.trim().length&&a.removeClass("active")}).on("keydown change","input",function(a){e&&clearTimeout(e);e=setTimeout(function(){var a=d.inp.val();
a!=h&&(h=a,d.search())},350)})};t.DEFAULTS={pageSize:30,dropdown:!1};t.prototype.search=function(){var a=this.inp.val().trim(),b=this.options.pageSize,c=0==a.length,d=c?Math.max(this.currentLen,b):b,e=this;this.$element.toggleClass("dirty",!c);$(".category-picker").toggleClass("dirty",!c);U(a,this.currentCategory,0,d+1,this.currentOrg,this.orderBy,function(b){"string"==$.type(b)?showAlert($("#body"),b,"alert-danger"):(e.currentText=c?null:a,e.afterLoad(b.length>d,b),e.$element.toggleClass("open",
!c).toggleClass("empty",0==b.length),e.options.dropdown||e.syncSearchText())})};t.prototype.syncSearchText=function(){var a=this.currentText||"",b=e.location.search;b.startsWith("?text=")&&(b="");b=b.length?b.split("&"):[];1<b.length&&b.pop();a.length?b.length?(b.push("text="+a),a=b.join("&")):a="?text="+a:a=b.length?b[0]:"/apps";history.replaceState(null,null,a)};t.prototype.loadCategory=function(a){var b=this.options.pageSize,c=this,d,e,h=a?"?category="+a:"/apps";switch(a){case "all":a=null;break;
case "new":a=null;e="byNew";break;case "quire":a=null;d="YUoTGc5byLS1MM5BGD8B81MR";break;default:a||(e="byPopular")}U(this.currentText,a,0,b+1,d,e,function(f){if("string"==$.type(f))showAlert($("#body"),f,"alert-danger");else{c.offset=b;c.currentLen=f.length;c.currentCategory=a;c.currentOrg=d;c.orderBy=e;var l=f.length>b;l&&c.currentLen--;c.afterLoad(l,f);history.replaceState(null,null,h);c.options.dropdown||c.syncSearchText();c.syncActiveItem()}})};t.prototype.syncActiveItem=function(){$(".category-menu .active").removeClass("active");
var a=/[?&]category(=([^&#]*)|&|#|$)/.exec(e.location.href),a=a&&a[2];$('.category-menu a[href="'+(a?"?category="+a:"/apps")+'"]').parent().addClass("active")};t.prototype.loadMore=function(){var a=this.options.pageSize,b=this.offset+a,c=this;U(this.currentText,this.currentCategory,b,a+1,this.currentOrg,this.orderBy,function(d){if("string"==$.type(d))showAlert($("#body"),d,"alert-danger");else{c.offset=b;c.currentLen+=d.length;var e=d.length>a;e&&c.currentLen--;c.afterLoad(e,d,!0)}})};t.prototype.afterLoad=
function(a,b,c){this.$list.toggleClass("more",a);a&&b.pop();this.renderResult(b,c)};t.prototype.renderResult=function(a,b){for(var c=this.options.dropdown,d=a.length,e=[],h=0;h<d;h++){var f=a[h];$.merge(e,c?['<li class="u-item">','<a href="',f.url,'">',R(f.image,f.nameText,f.initials,f.iconColor,"x32","pull-left"),'<div class="name">',f.nameText,"</div>",'<div class="desc">',f.shortdesc,"</div>","</a>","</li>"]:['<a class="app-item" href="',f.url,'">',R(f.image,f.nameText,f.initials,f.iconColor,"x64"),
'<h3 class="name">',f.nameText,"</h3>","<p>",f.shortdesc,"</p>","</a>"])}this.$list[b?"append":"html"](e.join(""))};H="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";$(function(){function a(){gaWS("print",e.location.search)}var b=$("body").data("init");if(b)for(var c={home:Ka,"all-need":Oa,npo:Na,website:na,"web-header":oa,"web-header-menu":oa,"work-header":Pa,blog:Ra,auth:Sa,"app-directory":Wa,"app-profile":Xa,"app-doc":Va,ical:Ya},b=b.split(","),d=0,g=b.length;d<g;d++){var h;
(h=c[b[d].trim()])&&h()}e.matchMedia&&e.matchMedia("print").addListener(function(b){b.matches&&a()});e.addEventListener("beforeprint",a);var f=P();(b=B("qrnpg",!1))&&C("qrnpg");if(null!=f&&(c=$.cookie("qrui"))&&!(f||"-").startsWith(c)&&!b){C("qrnpg","t",!1);b=location.href;location.href=b+(0<=b.indexOf("?")?"&":"?")+"_R_="+(new Date).getTime();return}b=$('a[href="/r/logout"]');b.attr("href","#");b.click(function(){function a(){e.location="/r/logout"}gae("acc","logout");if(!f)return a();var b=f.substring(0,
7);cacheDal.put("navi:"+b);F("notifs:"+f);F("notf.rd:"+f);e.caches&&caches.delete("sw-s3-cache");cacheDal.get("tc:metas",function(c){var d;if(c){for(var e=c.length;0<=--e;)b==c[e][4]&&(cacheDal.put("tc:"+c[e][0]+b),c.splice(e,1),d=!0);d&&cacheDal.put("tc:metas",c,function(){a()})}d||a()});setTimeout(a,1500)});b=e.location.search;c=e.location.pathname;d=b.replace(/(?:&|(\?))lang=[^&#]*(?:(?!\1).)?/,"$1");b!=d&&history.replaceState(null,null,1<d.length?d:c)})})(window);
