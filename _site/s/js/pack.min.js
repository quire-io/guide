(function(d){function ia(){function a(a){b&&a(b);var g=indexedDB.open("quire",1);g.onsuccess=function(){a(b=g.result)};g.onerror=function(){a()}}var b;return{get:function(b,g){a(function(a){if(a){var d=a.transaction("dcache","readonly").objectStore("dcache").get(b);d.onsuccess=function(){var a=d.result;g(a?JSON.parse(a.data):null)};d.onerror=function(){g()}}else g()})},put:function(b,g,h){a(function(a){function f(){h&&(h(),h=null)}a?(a=a.transaction("dcache","readwrite").objectStore("dcache"),a=g?
a.put({id:b,data:JSON.stringify(g)}):a.delete(b),a.onsuccess=a.onerror=f):f()})}}}function ja(){return{get:function(a,b){b(D(a))},put:function(a,b,c){E(a,b);c&&c()}}}function T(a){null!=a&&null==a.offsetWidth&&T(null)}function ka(a){var b=qrLang[1];a=Math.floor(((new Date).getTime()-(new Date(a)).getTime())/6E4);if(0<=a){if(2>a)return b[la];if(60>a)return b[ma].replace("[=n]",a);a=Math.floor(a/60);if(2>a)return b[na];if(24>a)return b[oa].replace("[=n]",a);if(48>a)return b[pa];a=Math.floor(a/24);if(8>
a)return b[qa].replace("[=n]",a)}}function L(a,b){try{var c=sessionStorage[a];return null!=c&&0!=b?JSON.parse(c):c}catch(g){}}function F(a,b,c){try{null==b?sessionStorage.removeItem(a):sessionStorage[a]=0!=c?JSON.stringify(b):b}catch(g){}}function D(a,b){try{var c=localStorage[a];return null!=c&&0!=b?JSON.parse(c):c}catch(g){}}function E(a,b,c){try{null==b?localStorage.removeItem(a):localStorage[a]=0!=c?JSON.stringify(b):b}catch(g){}}function U(a,b,c){if(null!=a){c=c||{};var g=0!=c.encode;G();y=$('<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+
(g?M(b):b)+"</div></div>");c.clz&&y.addClass(c.clz);b=y;var g=c.placement,h=c.body;g||(g="bottom");b.detach().css({top:0,left:0,display:"block"}).addClass(g);h?$(document.body).append(b):b.insertAfter(a);h=$(a);a=$.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():null,{scroll:h.scrollTop(),width:h.outerWidth(),height:h.outerHeight()},h.offset());var h=b[0].offsetWidth,d=b[0].offsetHeight,f,k;"top"==g?(f=Math.round(a.top)-d,k=Math.round(a.left+(a.width-h)/2)):"bottom"==
g&&(f=Math.round(a.top+a.height),k=Math.round(a.left+(a.width-h)/2));b.addClass(g);var l=g,g=b[0].offsetWidth,u=b[0].offsetHeight;a=!1;h=$(b).children()[0];b.offset({top:f,left:k}).addClass("in");var d=b[0].offsetWidth,e=b[0].offsetHeight;"top"==l&&e!=u&&(f+=u-e,a=!0);"bottom"==l||"top"==l?(l=0,0>k&&(l=-2*k,k=0,b.offset({top:f,left:k}),d=b[0].offsetWidth),h.style.left=V(l-g+d,d)):h.style.top=V(e-u,e);a&&b.offset({top:f,left:k});c.fixPosition&&(c=y.offset(),y.offset({top:c.top+y.children()[0].offsetHeight,
left:c.left}))}}function V(a,b){return a?50*(1-a/b)+"%":""}function G(){y&&y.remove()}function W(a,b){if(!browser.mobile)$(a).on("mouseenter",function(c){U(a,b)}).on("mouseleave",function(a){G()})}function ra(a,b,c,g,h,d,f){h||(h="x32");d||(d="");d+=f?" partner-icon":"";return a?['<img class="img-icon ',h," ",d,'" src="',a,'" alt="',M(b),,'">'].join(""):['<div class="img-icon bg ',h," ",d," ","iconc-"+g,'">',M(c),"</div>"].join("")}function M(a){return $("<div></div>").text(a).html()}function X(){}
function H(){Y||(Y=!0,$(document).on("click.bs.dropdown","[data-toggle=dropdown]",function(a){var b=$(a.currentTarget),c=b.parent();setTimeout(function(){b.data("dropdownInited")||(b.data("dropdownInited",!0),c.hasClass("open")||(sa(c[0]),Z(b)))},10);return!1}).on("click.bs.dropdown.data-api",function(a){a=$("[data-toggle=dropdown]").parent();var b=$.Event("hide.bs.dropdown");a.trigger(b);b.isDefaultPrevented()||a.removeClass("open").trigger($.Event("hidden.bs.dropdown"))}).on("click","#header .dropdown-menu, #homeBanner .dropdown-menu",
function(a){a.stopPropagation()}))}function sa(a){$(a).on("click.bs.dropdown","[data-toggle=dropdown]",function(a){Z($(a.currentTarget));return!1})}function Z(a){a=a.parent();var b=a.hasClass("open"),c=document.createEvent("MouseEvent");c.initMouseEvent("click",!0,!0,d,0,0,0,0,0,!1,!1,!1,!1,0,document);$("body")[0].dispatchEvent(c);b||(b=$.Event("show.bs.dropdown"),a.trigger(b),b.isDefaultPrevented()||a.toggleClass("open").trigger($.Event("shown.bs.dropdown")))}function aa(a){if(a==document.body||
a.parentNode)ba(a),new ca(a)}function ba(a){var b;b=a==document.body||a.parentNode?null!=$(a).data(I):!1;b&&$(a).data(I).destroy()}function ta(){if(J){J=null;var a=sessRefer();if(L(J,!1)!=a)return F(J,a,!1),a}}function N(a,b,c,g,d){b+=20;var p=ua(b,c,g,d);a.scrollTo(p);b<d&&setTimeout(function(){N(a,b,c,g,d)},20)}function ua(a,b,c,d){a/=d/2;if(1>a)return c/2*a*a+b;--a;return-c/2*(a*(a-2)-1)+b}function da(){function a(a){var d=b.scrollTop(),h=b.height();$(".anim-init:not(.anim-end)").each(function(){var a=
$(this);0!=d&&d+.7*h>a.offset().top&&a.addClass("anim-end")})}var b=$(d);b.scroll(a).resize(a);a()}function va(){$("#notification").length&&wa();H();da();setTimeout(xa,500)}function ya(){ea();da()}function ea(){$("#notification").length&&notification.init();H();O()}function za(){H();fa()}function Aa(){$("#wrap").hasClass("anonymous-view")||fa(!0)}function Ba(){H()}function xa(){var a=$(".cookie-message");if(a.length){var b="ckemg:"+currentUser();D(b)?a.remove():(a.addClass("in"),a.on("click","button",
function(c){a.remove();E(b,!0)}))}}function fa(a){$("#notification")[0]&&notification.init(a);O()}function O(){var a=$("#header .navbar-collapse");$("#menu-toggle").click(function(){var b=a.hasClass("in");a[b?"removeClass":"addClass"]("in");$(this)[b?"removeClass":"addClass"]("open");$(".qr-collapse-navbar")[b?"removeClass":"addClass"]("navbar-fixed-bottom")})}function wa(){function a(a){$(a.currentTarget).append(h)}var b=$("#notification"),c=$("#home-noti"),d=c.find(".notification-count"),h=b.parent().find(".arrow-dropdown-menu");
notification.init();b.parent().on("show.bs.dropdown",a);c.parent().on("show.bs.dropdown",a).on("shown.bs.dropdown",function(a){b.parent().trigger("shown.bs.dropdown")});b.on("updateNotificationCount",function(a,b){c[0<b?"addClass":"removeClass"]("hasNew");d.html(b)});var p=$(h.find(".dropdown-header")[0].lastChild).text().trim();W(c[0],p)}var z=d.navigator.userAgent.toLowerCase(),C=d.navigator.platform.toLowerCase(),t=d.document.documentElement;d.browser={};browser.mobile=/android|iphone|ipad/.test(z)||
/iphone|ipad/.test(C);browser.ios=/iphone|ipad/.test(z)||/iphone|ipad/.test(C);browser.android=/android/.test(z);for(var C=[["ie",/(msie) ([\w.]+)/],["ie",/trident\/.+(rv:)([\w.]+)/],["edge",/(edge)\/([\w.]+)/],["firefox",/(firefox)\/([\w.]+)/],["chrome",/(chrome|crios)[ /]([\w.]+)/],["safari",/(version)\/([\w.]+).*safari/]],P=0;P<C.length;P++){var Q=C[P],ga=Q[1].exec(z);if(ga){browser[Q[0]]=!0;browser.version=parseFloat(ga[2]);$(t).addClass(Q[0]);break}}browser.mobile&&$(t).addClass("mobile");browser.ios&&
$(t).addClass("ios");browser.android&&(z=d.screen,$(t).addClass(640<z.width&&640<z.height?"android-tablet":"android-mobile"));"ontouchstart"in t||$(t).addClass("no-touch");d.cacheDal=!d.indexedDB||browser.safari&&10>browser.version?ja():ia();String.prototype.startsWith||(String.prototype.startsWith=function(a,b){b=b||0;return this.indexOf(a,b)===b});d.isCE=0>location.protocol.indexOf("http");var ha="http:"!=location.protocol;d.currentUser=function(){return $("body").data("user-id")||""};d.activeOid=
function(){return $("body").data("atv-id")||""};browser.ie&&(d.downloadOnIE=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="blob";c.onreadystatechange=function(a){4==c.readyState&&navigator.msSaveBlob(this.response,b)};c.send()});d.hiliteSyntax=function(a){d.hljs&&$("pre code",a).each(function(a,c){hljs.highlightBlock(c)})};var y,R=function(a,b){this.x=a;this.y=b};R.prototype.distanceTo=function(a){var b=this.x-a.x;a=this.y-a.y;return Math.sqrt(b*b+a*a)};d.ntGetApp=function(a){var b=
sessRefer();b&&sendQS([Ca,[b]],X,X);gae("new","get",a);browser.mobile&&gacvt()};d.sendQS=function(a,b,c){var d=$("body").data("qs")||"qs";return $.ajax({type:"POST",url:(isCE?"https://quire.io/":"/")+d,data:JSON.stringify(a),contentType:"application/json;charset=UTF-8"}).done(b).fail(function(a){c?c(a):(a=netErrorMsg(a))&&showAlert($("#body"),a,"alert-danger")})};d.netErrorMsg=function(a){switch(a.status){case 403:return"e403M"in d?e403M:"Sorry, you're not allowed to access this feature.";case 404:return"e404M"in
d?e404M:"Sorry, we couldn't find what you're looking for.";case 413:return"e413M"in d?e413M:"Sorry, your request is too large.";default:return"internalErrorM"in d?internalErrorM:"Sorry, we encountered an unexpected error."}};d.showTooltip=function(a,b,c){U(a,b,c)};d.clearTooltip=function(){G()};var S;d.showAlert=function(a,b,c){if(a){"string"==typeof a&&(a=$(a)[0]);clearAlert();var d=$(a).children(".alert-wrapper");d.length||(d=$('<div class="row alert-wrapper"><div class="container"><div class="alert fade"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><p></p></div></div></div>'),
$(a).prepend(d),$(document).on("click",function(a){clearAlert()}),d.on("click",".alert",function(a){$(a.target).hasClass("close")||a.stopPropagation()}));a=d.find(".alert");a.length||(a=S,d.find(".container").append(a));a.attr("class","alert fade "+(c?c:""));a.find("p").html(b);a.addClass("in");S=a}};d.clearAlert=function(){$(S).removeClass("in").remove()};d.getClipboardData=function(a){a=a.clipboardData&&a.clipboardData.items;var b=[];if(a)for(var c=a.length;0<=--c;)b.push(a[c]);return b};d.getPastedData=
function(a){a.stopPropagation();a.preventDefault();a=a.clipboardData||d.clipboardData;return browser.ie?["",a.getData("text")]:[a.getData("text/html"),a.getData("text/plain")]};d.getClipboardText=function(a,b){navigator.clipboard.readText().then(a).catch(b)};d.reloadPage=function(){d.location.reload(!0)};d.jqSearch=function(a){var b=new Mark("body");b.unmark();a&&b.mark(a,{separateWordSearch:!1,filter:function(a){return 0<a.parentNode.offsetWidth}})};d.contUri=function(){var a=/[?&]continue=([^&]+)(&.*)?$/.exec(location.search);
return null!=a?decodeURIComponent(a[1]):null};var Ca="gtApp",la="Now",ma="Mins",na="Hr",oa="Hrs",pa="Day",qa="Days",Y=!1;d.dataLayer=d.dataLayer||[];d.gtag=function(){dataLayer.push(arguments)};d.gacvt=function(a){gtag("event","conversion",{send_to:"AW-1067329176/mNg6CJvTqoEBEJjN-PwD",event_callback:function(){"undefined"!=typeof a&&(d.location=a)}});return!1};ha&&!/^\/r\/.+\/confirm/i.test(d.location.pathname)?(gtag("js",new Date),gtag("config","UA-48347893-1"),gtag("config","AW-1067329176"),(t=
currentUser())&&gtag("set",{user_id:t})):d["ga-disable-UA-48347893-1"]=!0;d.gae=function(a,b,c,d){gtag("event",b,{event_category:a,event_label:c||"",value:d||0})};d.gapg=function(a,b){var c={};c["/"==a.substring(0)?"page_path":"page_location"]=a;b&&(c.page_title=b);gtag("config","UA-48347893-1",c)};d.gaWS=function(a,b,c){gae("ws",a,b,c)};d.logError=function(a,b,c){c&&(b=b+"\n"+c);gae("error",a,b);console.log("["+a+"] "+b)};d.gdrive=function(){function a(a){if(!p.isVisible()){var b=null;a[google.picker.Response.ACTION]==
google.picker.Action.PICKED&&(b=a[google.picker.Response.DOCUMENTS][0]);d(b)}}function b(){p=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES).addView(google.picker.ViewId.DOCS).addView((new google.picker.DocsView(google.picker.ViewId.DOCS)).setEnableTeamDrives(!0)).setOAuthToken(h).setCallback(a).build();p.setVisible(!0)}function c(a){a&&!a.error&&(h=a.access_token,gapi.load("picker",{callback:b}))}var d,h,p;
return{cid:"945756434190-"+(ha?"79dh21cr8shodd2407bq8rvqdnfu7abo":"lv1n6lpgk3tmkad1kh88tlovij811inc")+".apps.googleusercontent.com",openPicker:function(a){d=a;gapi.auth.authorize({client_id:gdrive.cid,scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!1},c)}}}();(function(){function a(a){a=d.json?JSON.stringify(a):String(a);return d.raw?a:encodeURIComponent(a)}function b(a,b){var f;if(d.raw)f=a;else a:{var k=a;0===k.indexOf('"')&&(k=k.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,
"\\"));try{k=decodeURIComponent(k.replace(c," "));f=d.json?JSON.parse(k):k;break a}catch(l){}f=void 0}return $.isFunction(b)?b(f):f}var c=/\+/g,d=$.cookie=function(c,p,f){if(void 0!==p&&!$.isFunction(p)){f=$.extend({},d.defaults,f);if("number"===typeof f.expires){var k=f.expires,l=f.expires=new Date;l.setTime(+l+864E5*k)}return document.cookie=[d.raw?c:encodeURIComponent(c),"=",a(p),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?
"; secure":""].join("")}f=c?void 0:{};for(var k=document.cookie?document.cookie.split("; "):[],l=0,u=k.length;l<u;l++){var e=k[l].split("="),m;m=e.shift();m=d.raw?m:decodeURIComponent(m);e=e.join("=");if(c&&c===m){f=b(e,p);break}c||void 0===(e=b(e))||(f[m]=e)}return f};d.defaults={};$.removeCookie=function(a,b){if(void 0===$.cookie(a))return!1;$.cookie(a,"",$.extend({},b,{expires:-1}));return!$.cookie(a)}})();(function(){function a(a,d){var h=$(a.target);a.which==b.ENTER&&h.is(":button")||(a.which==
b.ESC&&(h.is("input")||h.is("textarea"))&&h.val()?h[0].value="":(h=$(a.currentTarget).find('[data-hotkey*="'+d+'"]')[0])&&h.click())}var b={ENTER:13,ESC:27};$(document).on("keydown",".modal.in,.full-dialog",function(c){switch(c.which){case b.ENTER:a(c,"enter");break;case b.ESC:a(c,"escape")}})})();(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define(b):a.Mark=b()})(this,function(){var a="function"===typeof Symbol&&"symbol"===
typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=function(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function");},c=function(){function a(l,b){for(var e=0;e<b.length;e++){var m=b[e];m.enumerable=m.enumerable||!1;m.configurable=!0;"value"in m&&(m.writable=!0);Object.defineProperty(l,m.key,m)}}return function(l,b,e){b&&a(l.prototype,b);e&&a(l,e);return l}}(),
g=Object.assign||function(a){for(var l=1;l<arguments.length;l++){var b=arguments[l],e;for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},h=function(){function a(l){var u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5E3;b(this,a);this.ctx=l;this.iframes=u;this.exclude=e;this.iframesTimeout=m}c(a,[{key:"getContexts",value:function(){var a=void 0,
b=[],a="undefined"!==typeof this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"===typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[];a.forEach(function(a){var l=0<b.filter(function(l){return l.contains(a)}).length;-1!==b.indexOf(a)||l||b.push(a)});return b}},{key:"getIframeContents",value:function(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},
m=void 0;try{var c=a.contentWindow,m=c.document;if(!c||!m)throw Error("iframe inaccessible");}catch(d){e()}m&&b(m)}},{key:"isIframeBlank",value:function(a){var b=a.getAttribute("src").trim();return"about:blank"===a.contentWindow.location.href&&"about:blank"!==b&&b}},{key:"observeIframeLoad",value:function(a,b,e){var m=this,c=!1,d=null,n=function A(){if(!c){c=!0;clearTimeout(d);try{m.isIframeBlank(a)||(a.removeEventListener("load",A),m.getIframeContents(a,b,e))}catch(n){e()}}};a.addEventListener("load",
n);d=setTimeout(n,this.iframesTimeout)}},{key:"onIframeReady",value:function(a,b,e){try{"complete"===a.contentWindow.document.readyState?this.isIframeBlank(a)?this.observeIframeLoad(a,b,e):this.getIframeContents(a,b,e):this.observeIframeLoad(a,b,e)}catch(m){e()}}},{key:"waitForIframes",value:function(a,b){var e=this,m=0;this.forEachIframe(a,function(){return!0},function(a){m++;e.waitForIframes(a.querySelector("html"),function(){--m||b()})},function(a){a||b()})}},{key:"forEachIframe",value:function(b,
c,e){var m=this,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},q=b.querySelectorAll("iframe"),n=q.length,f=0,q=Array.prototype.slice.call(q),g=function(){0>=--n&&d(f)};n||g();q.forEach(function(b){if(a.matches(b,m.exclude))g();else m.onIframeReady(b,function(a){c(b)&&(f++,e(a));g()},g)})}},{key:"createIterator",value:function(a,b,e){return document.createNodeIterator(a,b,e,!1)}},{key:"createInstanceOnIframe",value:function(b){return new a(b.querySelector("html"),this.iframes)}},
{key:"compareNodeIframe",value:function(a,b,e){if(a.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)if(null!==b){if(b.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(a){var b=a.previousNode(),e=void 0,e=null===b?a.nextNode():a.nextNode()&&a.nextNode();return{prevNode:b,node:e}}},{key:"checkIframeFilter",value:function(a,b,e,m){var c=!1,d=!1;m.forEach(function(a,b){a.val===e&&(c=b,d=a.handled)});if(this.compareNodeIframe(a,
b,e))return!1!==c||d?!1===c||d||(m[c].handled=!0):m.push({val:e,handled:!0}),!0;!1===c&&m.push({val:e,handled:!1});return!1}},{key:"handleOpenIframes",value:function(a,b,e,c){var d=this;a.forEach(function(a){a.handled||d.getIframeContents(a.val,function(a){d.createInstanceOnIframe(a).forEachNode(b,e,c)})})}},{key:"iterateThroughNodes",value:function(a,b,e,c,d){for(var q=this,n=this.createIterator(b,a,c),f=[],g=[],k=void 0,h=void 0,x=function(){var a=q.getIteratorNode(n);h=a.prevNode;return k=a.node};x();)this.iframes&&
this.forEachIframe(b,function(a){return q.checkIframeFilter(k,h,a,f)},function(b){q.createInstanceOnIframe(b).forEachNode(a,function(a){return g.push(a)},c)}),g.push(k);g.forEach(function(a){e(a)});this.iframes&&this.handleOpenIframes(f,a,e,c);d()}},{key:"forEachNode",value:function(a,b,e){var c=this,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},q=this.getContexts(),f=q.length;f||d();q.forEach(function(q){var g=function(){c.iterateThroughNodes(a,q,b,e,function(){0>=--f&&d()})};
c.iframes?c.waitForIframes(q,g):g()})}}],[{key:"matches",value:function(a,b){var e="string"===typeof b?[b]:b,c=a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;if(c){var d=!1;e.every(function(b){return c.call(a,b)?(d=!0,!1):!0});return d}return!1}}]);return a}(),p=function(){function a(l){b(this,a);this.opt=g({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],wildcards:"disabled"},
l)}c(a,[{key:"create",value:function(a){"disabled"!==this.opt.wildcards&&(a=this.setupWildcardsRegExp(a));a=this.escapeStr(a);Object.keys(this.opt.synonyms).length&&(a=this.createSynonymsRegExp(a));if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.setupIgnoreJoinersRegExp(a);this.opt.diacritics&&(a=this.createDiacriticsRegExp(a));a=this.createMergedBlanksRegExp(a);if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.createJoinersRegExp(a);"disabled"!==this.opt.wildcards&&
(a=this.createWildcardsRegExp(a));a=this.createAccuracyRegExp(a);return new RegExp(a,"gm"+(this.opt.caseSensitive?"":"i"))}},{key:"escapeStr",value:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createSynonymsRegExp",value:function(a){var b=this.opt.synonyms,e=this.opt.caseSensitive?"":"i",c=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\x00":"",d;for(d in b)if(b.hasOwnProperty(d)){var q=b[d],f="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(d):
this.escapeStr(d),q="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(q):this.escapeStr(q);""!==f&&""!==q&&(a=a.replace(new RegExp("("+this.escapeStr(f)+"|"+this.escapeStr(q)+")","gm"+e),c+("("+this.processSynonyms(f)+"|")+(this.processSynonyms(q)+")")+c))}return a}},{key:"processSynonyms",value:function(a){if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.setupIgnoreJoinersRegExp(a);return a}},{key:"setupWildcardsRegExp",value:function(a){a=a.replace(/(?:\\)*\?/g,function(a){return"\\"===
a.charAt(0)?"?":"\u0001"});return a.replace(/(?:\\)*\*/g,function(a){return"\\"===a.charAt(0)?"*":"\u0002"})}},{key:"createWildcardsRegExp",value:function(a){var b="withSpaces"===this.opt.wildcards;return a.replace(/\u0001/g,b?"[\\S\\s]?":"\\S?").replace(/\u0002/g,b?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(a){return a.replace(/[^(|)\\]/g,function(a,b,l){b=l.charAt(b+1);return/[(|)\\]/.test(b)||""===b?a:a+"\x00"})}},{key:"createJoinersRegExp",value:function(a){var b=[],
e=this.opt.ignorePunctuation;Array.isArray(e)&&e.length&&b.push(this.escapeStr(e.join("")));this.opt.ignoreJoiners&&b.push("\\u00ad\\u200b\\u200c\\u200d");return b.length?a.split(/\u0000+/).join("["+b.join("")+"]*"):a}},{key:"createDiacriticsRegExp",value:function(a){var b=this.opt.caseSensitive?"":"i",e=this.opt.caseSensitive?"a\u00e0\u00e1\u1ea3\u00e3\u1ea1\u0103\u1eb1\u1eaf\u1eb3\u1eb5\u1eb7\u00e2\u1ea7\u1ea5\u1ea9\u1eab\u1ead\u00e4\u00e5\u0101\u0105 A\u00c0\u00c1\u1ea2\u00c3\u1ea0\u0102\u1eb0\u1eae\u1eb2\u1eb4\u1eb6\u00c2\u1ea6\u1ea4\u1ea8\u1eaa\u1eac\u00c4\u00c5\u0100\u0104 c\u00e7\u0107\u010d C\u00c7\u0106\u010c d\u0111\u010f D\u0110\u010e e\u00e8\u00e9\u1ebb\u1ebd\u1eb9\u00ea\u1ec1\u1ebf\u1ec3\u1ec5\u1ec7\u00eb\u011b\u0113\u0119 E\u00c8\u00c9\u1eba\u1ebc\u1eb8\u00ca\u1ec0\u1ebe\u1ec2\u1ec4\u1ec6\u00cb\u011a\u0112\u0118 i\u00ec\u00ed\u1ec9\u0129\u1ecb\u00ee\u00ef\u012b I\u00cc\u00cd\u1ec8\u0128\u1eca\u00ce\u00cf\u012a l\u0142 L\u0141 n\u00f1\u0148\u0144 N\u00d1\u0147\u0143 o\u00f2\u00f3\u1ecf\u00f5\u1ecd\u00f4\u1ed3\u1ed1\u1ed5\u1ed7\u1ed9\u01a1\u1edf\u1ee1\u1edb\u1edd\u1ee3\u00f6\u00f8\u014d O\u00d2\u00d3\u1ece\u00d5\u1ecc\u00d4\u1ed2\u1ed0\u1ed4\u1ed6\u1ed8\u01a0\u1ede\u1ee0\u1eda\u1edc\u1ee2\u00d6\u00d8\u014c r\u0159 R\u0158 s\u0161\u015b\u0219\u015f S\u0160\u015a\u0218\u015e t\u0165\u021b\u0163 T\u0164\u021a\u0162 u\u00f9\u00fa\u1ee7\u0169\u1ee5\u01b0\u1eeb\u1ee9\u1eed\u1eef\u1ef1\u00fb\u00fc\u016f\u016b U\u00d9\u00da\u1ee6\u0168\u1ee4\u01af\u1eea\u1ee8\u1eec\u1eee\u1ef0\u00db\u00dc\u016e\u016a y\u00fd\u1ef3\u1ef7\u1ef9\u1ef5\u00ff Y\u00dd\u1ef2\u1ef6\u1ef8\u1ef4\u0178 z\u017e\u017c\u017a Z\u017d\u017b\u0179".split(" "):
"a\u00e0\u00e1\u1ea3\u00e3\u1ea1\u0103\u1eb1\u1eaf\u1eb3\u1eb5\u1eb7\u00e2\u1ea7\u1ea5\u1ea9\u1eab\u1ead\u00e4\u00e5\u0101\u0105A\u00c0\u00c1\u1ea2\u00c3\u1ea0\u0102\u1eb0\u1eae\u1eb2\u1eb4\u1eb6\u00c2\u1ea6\u1ea4\u1ea8\u1eaa\u1eac\u00c4\u00c5\u0100\u0104 c\u00e7\u0107\u010dC\u00c7\u0106\u010c d\u0111\u010fD\u0110\u010e e\u00e8\u00e9\u1ebb\u1ebd\u1eb9\u00ea\u1ec1\u1ebf\u1ec3\u1ec5\u1ec7\u00eb\u011b\u0113\u0119E\u00c8\u00c9\u1eba\u1ebc\u1eb8\u00ca\u1ec0\u1ebe\u1ec2\u1ec4\u1ec6\u00cb\u011a\u0112\u0118 i\u00ec\u00ed\u1ec9\u0129\u1ecb\u00ee\u00ef\u012bI\u00cc\u00cd\u1ec8\u0128\u1eca\u00ce\u00cf\u012a l\u0142L\u0141 n\u00f1\u0148\u0144N\u00d1\u0147\u0143 o\u00f2\u00f3\u1ecf\u00f5\u1ecd\u00f4\u1ed3\u1ed1\u1ed5\u1ed7\u1ed9\u01a1\u1edf\u1ee1\u1edb\u1edd\u1ee3\u00f6\u00f8\u014dO\u00d2\u00d3\u1ece\u00d5\u1ecc\u00d4\u1ed2\u1ed0\u1ed4\u1ed6\u1ed8\u01a0\u1ede\u1ee0\u1eda\u1edc\u1ee2\u00d6\u00d8\u014c r\u0159R\u0158 s\u0161\u015b\u0219\u015fS\u0160\u015a\u0218\u015e t\u0165\u021b\u0163T\u0164\u021a\u0162 u\u00f9\u00fa\u1ee7\u0169\u1ee5\u01b0\u1eeb\u1ee9\u1eed\u1eef\u1ef1\u00fb\u00fc\u016f\u016bU\u00d9\u00da\u1ee6\u0168\u1ee4\u01af\u1eea\u1ee8\u1eec\u1eee\u1ef0\u00db\u00dc\u016e\u016a y\u00fd\u1ef3\u1ef7\u1ef9\u1ef5\u00ffY\u00dd\u1ef2\u1ef6\u1ef8\u1ef4\u0178 z\u017e\u017c\u017aZ\u017d\u017b\u0179".split(" "),
c=[];a.split("").forEach(function(d){e.every(function(e){if(-1!==e.indexOf(d)){if(-1<c.indexOf(e))return!1;a=a.replace(new RegExp("["+e+"]","gm"+b),"["+e+"]");c.push(e)}return!0})});return a}},{key:"createMergedBlanksRegExp",value:function(a){return a.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(a){var b=this,e=this.opt.accuracy,c="string"===typeof e?e:e.value,d="";("string"===typeof e?[]:e.limiters).forEach(function(a){d+="|"+b.escapeStr(a)});switch(c){default:return"()("+
a+")";case "complementary":return d="\\s"+(d?d:this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~\u00a1\u00bf")),"()([^"+d+"]*"+a+"[^"+d+"]*)";case "exactly":return"(^|\\s"+d+")("+a+")(?=$|\\s"+d+")"}}}]);return a}(),f=function(){function f(a){b(this,f);this.ctx=a;this.ie=!1;a=d.navigator.userAgent;if(-1<a.indexOf("MSIE")||-1<a.indexOf("Trident"))this.ie=!0}c(f,[{key:"log",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"debug",e=this.opt.log;if(this.opt.debug&&"object"===
("undefined"===typeof e?"undefined":a(e))&&"function"===typeof e[c])e[c]("mark.js: "+b)}},{key:"getSeparatedKeywords",value:function(a){var b=this,e=[];a.forEach(function(a){b.opt.separateWordSearch?a.split(" ").forEach(function(a){a.trim()&&-1===e.indexOf(a)&&e.push(a)}):a.trim()&&-1===e.indexOf(a)&&e.push(a)});return{keywords:e.sort(function(a,b){return b.length-a.length}),length:e.length}}},{key:"isNumeric",value:function(a){return Number(parseFloat(a))==a}},{key:"checkRanges",value:function(a){var b=
this;if(!Array.isArray(a)||"[object Object]"!==Object.prototype.toString.call(a[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(a),[];var e=[],c=0;a.sort(function(a,b){return a.start-b.start}).forEach(function(a){var d=b.callNoMatchOnInvalidRanges(a,c),l=d.start,f=d.end;d.valid&&(a.start=l,a.length=f-l,e.push(a),c=f)});return e}},{key:"callNoMatchOnInvalidRanges",value:function(a,b){var c=void 0,d=void 0,f=!1;a&&"undefined"!==typeof a.start?(c=parseInt(a.start,
10),d=c+parseInt(a.length,10),this.isNumeric(a.start)&&this.isNumeric(a.length)&&0<d-b&&0<d-c?f=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(a)),this.opt.noMatch(a))):(this.log("Ignoring invalid range: "+JSON.stringify(a)),this.opt.noMatch(a));return{start:c,end:d,valid:f}}},{key:"checkWhitespaceRanges",value:function(a,b,c){var d=void 0,f=!0,g=c.length,d=b-g;b=parseInt(a.start,10)-d;b=b>g?g:b;d=b+parseInt(a.length,10);d>g&&(d=g,this.log("End range automatically set to the max value of "+
g));0>b||0>d-b||b>g||d>g?(f=!1,this.log("Invalid range: "+JSON.stringify(a)),this.opt.noMatch(a)):""===c.substring(b,d).replace(/\s+/g,"")&&(f=!1,this.log("Skipping whitespace only range: "+JSON.stringify(a)),this.opt.noMatch(a));return{start:b,end:d,valid:f}}},{key:"getTextNodes",value:function(a){var b=this,c="",d=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(a){d.push({start:c.length,end:(c+=a.textContent).length,node:a})},function(a){return b.matchesExclude(a.parentNode)?NodeFilter.FILTER_REJECT:
NodeFilter.FILTER_ACCEPT},function(){a({value:c,nodes:d})})}},{key:"matchesExclude",value:function(a){return h.matches(a,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(a,b,c){var d=this.opt.element?this.opt.element:"mark";a=a.splitText(b);b=a.splitText(c-b);d=document.createElement(d);d.setAttribute("data-markjs","true");this.opt.className&&d.setAttribute("class",this.opt.className);d.textContent=a.textContent;a.parentNode.replaceChild(d,
a);return b}},{key:"wrapRangeInMappedTextNode",value:function(a,b,c,d,f){var g=this;a.nodes.every(function(n,h){var k=a.nodes[h+1];if("undefined"===typeof k||k.start>b){if(!d(n.node))return!1;var k=b-n.start,v=(c>n.end?n.end:c)-n.start,p=a.value.substr(0,n.start),x=a.value.substr(v+n.start);n.node=g.wrapRangeInTextNode(n.node,k,v);a.value=p+x;a.nodes.forEach(function(b,c){c>=h&&(0<a.nodes[c].start&&c!==h&&(a.nodes[c].start-=v),a.nodes[c].end-=v)});c-=v;f(n.node.previousSibling,n.start);if(c>n.end)b=
n.end;else return!1}return!0})}},{key:"wrapGroups",value:function(a,b,c,d){a=this.wrapRangeInTextNode(a,b,b+c);d(a.previousSibling);return a}},{key:"separateGroups",value:function(a,b,c,d,f){c=b.length;for(var g=1;g<c;g++){var n=a.textContent.indexOf(b[g]);b[g]&&-1<n&&d(b[g],a)&&(a=this.wrapGroups(a,n,b[g].length,f))}return a}},{key:"wrapMatches",value:function(a,b,c,d,f){var g=this,n=0===b?0:b+1;this.getTextNodes(function(b){b.nodes.forEach(function(b){b=b.node;for(var f=void 0;null!==(f=a.exec(b.textContent))&&
""!==f[n];){if(g.opt.separateGroups)b=g.separateGroups(b,f,n,c,d);else{if(!c(f[n],b))continue;var h=f.index;if(0!==n)for(var k=1;k<n;k++)h+=f[k].length;b=g.wrapGroups(b,h,f[n].length,d)}a.lastIndex=0}});f()})}},{key:"wrapMatchesAcrossElements",value:function(a,b,c,d,f){var g=this,h=0===b?0:b+1;this.getTextNodes(function(b){for(var k=void 0;null!==(k=a.exec(b.value))&&""!==k[h];){var u=k.index;if(0!==h)for(var p=1;p<h;p++)u+=k[p].length;g.wrapRangeInMappedTextNode(b,u,u+k[h].length,function(a){return c(k[h],
a)},function(b,c){a.lastIndex=c;d(b)})}f()})}},{key:"wrapRangeFromIndex",value:function(a,b,c,d){var f=this;this.getTextNodes(function(g){var h=g.value.length;a.forEach(function(a,d){var l=f.checkWhitespaceRanges(a,h,g.value),m=l.start,k=l.end;l.valid&&f.wrapRangeInMappedTextNode(g,m,k,function(c){return b(c,a,g.value.substring(m,k),d)},function(b){c(b,a)})});d()})}},{key:"unwrapMatches",value:function(a){for(var b=a.parentNode,c=document.createDocumentFragment();a.firstChild;)c.appendChild(a.removeChild(a.firstChild));
b.replaceChild(c,a);this.ie?this.normalizeTextNode(b):b.normalize()}},{key:"normalizeTextNode",value:function(a){if(a){if(3===a.nodeType)for(;a.nextSibling&&3===a.nextSibling.nodeType;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);else this.normalizeTextNode(a.firstChild);this.normalizeTextNode(a.nextSibling)}}},{key:"markRegExp",value:function(a,b){var c=this;this.opt=b;this.log('Searching with expression "'+a+'"');var d=0,f="wrapMatches";this.opt.acrossElements&&(f=
"wrapMatchesAcrossElements");this[f](a,this.opt.ignoreGroups,function(a,b){return c.opt.filter(b,a,d)},function(a){d++;c.opt.each(a)},function(){0===d&&c.opt.noMatch(a);c.opt.done(d)})}},{key:"mark",value:function(a,b){var c=this;this.opt=b;var d=0,f="wrapMatches",g=this.getSeparatedKeywords("string"===typeof a?[a]:a),h=g.keywords,k=g.length,g=function v(a){var b=(new p(c.opt)).create(a),g=0;c.log('Searching with expression "'+b+'"');c[f](b,1,function(b,f){return c.opt.filter(f,a,d,g)},function(a){g++;
d++;c.opt.each(a)},function(){0===g&&c.opt.noMatch(a);h[k-1]===a?c.opt.done(d):v(h[h.indexOf(a)+1])})};this.opt.acrossElements&&(f="wrapMatchesAcrossElements");0===k?this.opt.done(d):g(h[0])}},{key:"markRanges",value:function(a,b){var c=this;this.opt=b;var d=0,f=this.checkRanges(a);f&&f.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(f)),this.wrapRangeFromIndex(f,function(a,b,d,f){return c.opt.filter(a,b,d,f)},function(a,b){d++;c.opt.each(a,b)},function(){c.opt.done(d)})):
this.opt.done(d)}},{key:"unmark",value:function(a){var b=this;this.opt=a;var c=this.opt.element?this.opt.element:"*",c=c+"[data-markjs]";this.opt.className&&(c+="."+this.opt.className);this.log('Removal selector "'+c+'"');this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(a){b.unwrapMatches(a)},function(a){var d=h.matches(a,c);a=b.matchesExclude(a);return!d||a?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(a){this._opt=g({},{element:"",className:"",
exclude:[],iframes:!1,iframesTimeout:5E3,separateWordSearch:!0,acrossElements:!1,ignoreGroups:0,each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:d.console},a)},get:function(){return this._opt}},{key:"iterator",get:function(){return new h(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]);return f}();return function(a){var b=this,c=new f(a);this.mark=function(a,d){c.mark(a,d);return b};this.markRegExp=function(a,d){c.markRegExp(a,
d);return b};this.markRanges=function(a,d){c.markRanges(a,d);return b};this.unmark=function(a){c.unmark(a);return b};return this}});var I="busy_mask",ca=function(a){this.$e=$(a);this.mask=$('<div class="loading-mask"></div>');this.$e.data(I,this);this.$e.is("body")?this.$e.append(this.mask):(this.$e.after(this.mask),a=this.$e[0],this.mask.css("width",a.offsetWidth+"px").css("height",a.offsetHeight+"px").css("left",a.offsetLeft+"px").css("top",a.offsetTop+"px"))};ca.prototype.destroy=function(){this.mask.remove();
this.$e.data(I,null)};d.showBusy=function(a,b){a||(a=document.body);b?aa(a):($(a).data("delay_busy_mask",!0),setTimeout(function(){null!=$(a).data("delay_busy_mask")&&aa(a)},500))};d.clearBusy=function(a){a||(a=document.body);$(a).data("delay_busy_mask",null);$(a).removeClass("loading-mask-cover");ba(a)};d.notification=function(){function a(){E(q,[n,w,A,1])}function b(b,f){if(!v){var e=currentUser();t="notifs:"+e;q="notf.rd:"+e;d.loadedNotisBeforeOpen=D(t)||[];e=D(q)||[];n=e[0];w=e[1]||0;A=e[2]||
0;1!=e[3]&&(n=A=null,E(t,[]),a());v=$(f||"#notification");var h=v.parent(),e=h.find(".arrow-dropdown-menu");z=e.find(".mk-rd-btn");y=v.find(".notification-count");x=h.find(".ntf-list");B=new r(x.parent().parent()[0]);e.on("click","li",function(a){if(!$(a.target).closest("a")[0]){var b=$(a.currentTarget).data("url");b?(a=$('<a href="'+b+'"></a>').appendTo(document.body),a[0].click(),a.remove()):a.stopPropagation()}}).on("click",".mk-rd-btn",function(a){p();a.stopPropagation();a.preventDefault()}).on("click",
".notification-action a",function(a){h.removeClass("open")}).on("click",".scroller-btn",function(a){a.target.blur();m&&clearTimeout(m);x.parent().removeClass("scroll-hint");m=null;B.scrollToTop()});h.on("shown.bs.dropdown",g);e=$(h.find(".arrow-dropdown-menu .dropdown-header")[0].lastChild).text().trim();W(v[0],e);b||(c(),setInterval(c,u))}}function c(){if("hidden"==document.visibilityState){if(0<--e)return;e=15}sendQS(["notif.cnt",ta()],l,function(a){C&&C(a)})}function g(){G();x.parent().addClass("loading");
h(!0)}function h(b){sendQS(["notifs",[n,w,b]],function(c){var d=c.shift();A=Math.max(A||0,d.loadAt||0);n=Math.max(A,n||0,c[0]?c[0].createdAt.epoch||0:0);var e=D(t)||[],g=w!=d.markAt;w=d.markAt;delete d.loadAt;delete d.markAt;if(e.length&&c.length){for(var h=[],k=0,l=c.length;k<l;k++){var m=c[k],p;a:{p=m.url;for(var q=m.createdAt.epoch,u=0,r=e.length;u<r;u++){var x=e[u];if(q==x.createdAt.epoch&&p==x.url){p=!0;break a}}p=void 0}p||h.push(m)}c=h}loadedNotisBeforeOpen=e=$.merge(c,e);for(var v in d)for(k=
0,l=e.length;k<l;k++)c=e[k],c.oid==v&&d[v]>=c.createdAt.epoch&&delete c.unread;d=e.length-150;0<d&&e.splice(150,d);if(g)for(g=e,d=0,k=g.length;d<k;d++)l=g[d],l.createdAt.epoch<=w&&delete l.unread;E(t,e);a();b&&f()},function(a){b&&f()})}function p(){var b=D(t)||[];b.length&&(b=b[0].createdAt.epoch,w!=b&&(w=b,a(),sendQS(["notif.rd",w],function(){k()},function(a){k()})))}function f(b){x.parent().removeClass("loading").removeClass("scroll-hint");x.empty();var c=D(t)||[],d=c.length,e;if(d){var f=x.parent()[0],
g=f.scrollHeight,h=[],k=!1;e=f.scrollTop;for(var m=0,n=c.length;m<n;m++){var p=c[m],q=p.createdBy,u=p.createdAt,r=u.epoch,u=ka(r)||u.message,v=r>A;(r=v||p.unread&&r>w)&&(k=!0);$.merge(h,['<li class="notification-item ',r?v?"trans":"old":"read",'" data-url="',p.url,'">',ra(q.image,q.name,q.initials,q.iconColor,"x40","pull-left circle"),'<div class="desc">','<div class="notification-action">',p.message,"</div>",'<div class="notification-time">',u,"</div>","</div>","</li>"])}x.html(h.join(""));60<e?
(e+=f.scrollHeight-g,x.find(".trans").length&&(x.parent().addClass("scroll-hint"),x.find(".trans").removeClass("trans"))):x.find(".trans").each(function(){var a=$(this),b=this.offsetHeight;a.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(b){a.removeClass("trans in").css("height","")});a.height(0);T(this);a.height(b);setTimeout(function(){$(this).addClass("in")},0)})}else e=0;b||(l(0),d&&(b=c[0].createdAt.epoch,A!=b&&(A=b,a())));z[k?"removeClass":"addClass"]("hide");
B.scrollTo(e);B.syncSize(500)}function k(){var a=D(t)||[];if(a.length){for(var b=x.children(),c=0,d=b.length;c<d;c++)$(b[c]).addClass("read").removeClass("old"),delete a[c].unread;z.addClass("hide");E(t,a)}}function l(a){v[0<a?"addClass":"removeClass"]("hasNew");y.html(a);v.trigger("updateNotificationCount",[a]);0<a&&h(!1)}var u=isCE?1E5:6E4,e=15,m,t,q,n,w,A,v,y,x,z,B,C;d.setNotifCount=function(a){currentUser()&&(b(),l(a))};d.openNotification=function(){b();g()};d.extensionInit=function(a,c){C=c;
b(!1,a)};return{init:function(a){b(a)}}}();var J="rfr.sent";d.sessRefer=function(){return L("rfr",!1)||""};var t=document.referrer,w;/[?&]gclid=/.test(w=location.href)&&(t=(t||"")+w.substring(w.indexOf("?")));t&&0>t.indexOf("//"+location.host)&&F("rfr",t,!1);var r=function(a,b){this.$e=$(a);this.options=$.extend({},r.DEFAULTS,b);this.full=this.sizeDirty=!1;this.init()};r.DEFAULTS={horizontal:!1,visible:"hover",detectResize:!0,wheelRate:.2,preventDefault:!0};r.prototype.init=function(){var a=this.$e,
b=a[0],c=this.options,g=this,h=c.horizontal;a.addClass("scrolled").addClass(h?"horizontal":"vertical");"static"==d.getComputedStyle(b,null).getPropertyValue("position")&&(b.style.position="relative");this.inner=a.children()[0];this.bar=b=$('<div class="scroller"><div class="scroller-track"><div class="scroller-handle"></div></div></div>');b.addClass("visible-"+c.visible);a.append(b);this.track=b.find(".scroller-track")[0];this.handle=b.find(".scroller-handle")[0];if(browser.mobile)$(this.inner).on("touchmove",
function(a){a.stopPropagation()}).on("scroll",function(b){g.syncPosition();a.trigger("scroll")});else{var p=new K(b[0],{dragTarget:".scroller-handle",renderer:new B(this),ignore:function(){return g.full}});a.on("click",".scroller-track",function(a){if(a.target!=g.handle){var b=a.originalEvent,b=h?b.offsetX:b.offsetY;b||(b=$(a.target).offset(),b=h?a.pageX-b.left:a.pageY-b.top);g.scrollTo(Math.round((b-g.handleSize()/2)*g.contentSize/g.trackSize()))}}).on(browser.firefox?"DOMMouseScroll":"mousewheel",
function(a){g.full||p.dragging||(a=a.originalEvent,g.scrollBy(Math.round((browser.firefox?40*a.detail:-a.wheelDelta)*c.wheelRate)),c.preventDefault&&a.preventDefault())})}if(c.detectResize)$(d).on("resize",function(a){g.syncSize(500)});this.syncSize()};r.prototype.scrollBy=function(a){this.scrollTo(a+this.position())};r.prototype.scrollTo=function(a){this.contentSize&&(a=Math.max(0,Math.min(this.boundPosition(),a)),$(this.inner)[this.options.horizontal?"scrollLeft":"scrollTop"](a),this.syncPosition(a),
this.$e.trigger("scroll"))};r.prototype.scrollToTop=function(){N(this,0,this.inner.scrollTop,0-this.inner.scrollTop,500)};r.prototype.scrollToBottom=function(){N(this,0,this.inner.scrollTop,this.boundPosition-this.inner.scrollTop,500)};r.prototype.position=function(){return this.inner[this.options.horizontal?"scrollLeft":"scrollTop"]};r.prototype.trackSize=function(){this._trackSize||(this._trackSize=this.options.horizontal?this.track.offsetWidth:this.track.offsetHeight);return this._trackSize};r.prototype.handleSize=
function(){this._handleSize||(this._handleSize=this.options.horizontal?this.handle.offsetWidth:this.handle.offsetHeight);return this._handleSize};r.prototype.boundPosition=function(){return this.contentSize?Math.max(0,this.contentSize-this.viewportSize):0};r.prototype.syncSize=function(a){if(a){this.sizeDirty=!0;var b=this;setTimeout(function(){b.sizeDirty&&b._syncSize();b.sizeDirty=!1},a)}else this._syncSize()};r.prototype._syncSize=function(){this[this.options.horizontal?"_syncWidth":"_syncHeight"]()};
r.prototype._syncWidth=function(){var a=this.contentSize=this.inner.scrollWidth,b=this.viewportSize=this.inner.clientWidth;this._trackSize=this._handleSize=null;this.full=b>=a;this.bar[this.full?"addClass":"removeClass"]("full");this.handle.style.width=b/a*100+"%";this._syncLeft()};r.prototype._syncHeight=function(){var a=this.contentSize=this.inner.scrollHeight,b=this.viewportSize=this.inner.clientHeight;this._trackSize=this._handleSize=null;this.full=b>=a;this.bar[this.full?"addClass":"removeClass"]("full");
this.handle.style.height=b/a*100+"%";this._syncTop()};r.prototype.syncPosition=function(a){this[this.options.horizontal?"_syncLeft":"_syncTop"](a)};r.prototype._syncLeft=function(a){this.handle.style.left=(a||this.inner.scrollLeft)/this.contentSize*100+"%"};r.prototype._syncTop=function(a){this.handle.style.top=(a||this.inner.scrollTop)/this.contentSize*100+"%"};w=function(){};w.prototype.setup=function(a){this.dragger=a};w.prototype.start=function(a,b){var c=$(b.outerHtml);this.ghost=c;c.addClass("dragger-ghost hide");
this.dragger.$e.append(c);$(b).addClass("dragged");c.style.left=b.offsetLeft+"px";c.style.top=b.offsetTop+"px";this.startOffsetLeft=b.offsetLeft-a.clientX;this.startOffsetTop=b.offsetTop-a.clientY;c.removeClass("hide")};w.prototype.move=function(a,b){this.ghost.css({left:this.startOffsetLeft+a.clientX+"px",top:this.startOffsetTop+a.clientY+"px"})};w.prototype.end=function(a,b){$(b).removeClass("dragged");this.ghost.addClass("hide").remove()};var B=function(a){this.scroller=a};B.prototype=$.extend({},
w.prototype);B.prototype.start=function(a,b){d.getSelection?d.getSelection().removeAllRanges():document.selection.createRange&&(document.selection.createRange(),document.selection.empty());$(b).addClass("dragged").parent().parent().addClass("scrolling");this.startPos=this.scroller.position();this.startEventPos=this.scroller.options.horizontal?a.clientX:a.clientY};B.prototype.move=function(a,b){var c=this.scroller;a.preventDefault();c.scrollTo(this.computeScrollPosition(c.options.horizontal?a.clientX:
a.clientY))};B.prototype.computeScrollPosition=function(a){var b=this.scroller;return this.startPos+Math.round((a-this.startEventPos)*b.contentSize/b.trackSize())};B.prototype.end=function(a,b){$(b).removeClass("dragged").parent().parent().removeClass("scrolling")};var K=function(a,b){this.$e=$(a);this.options=$.extend({},K.DEFAULTS,b);this._init=this.dragging=!1;this.init()};K.DEFAULTS={moveThreshold:3,dragTarget:".dragger-target",ignore:function(a){a=$(a.target);return a.is("input")||a.is("textarea")},
renderer:new w};K.prototype.init=function(){var a=this,b=this.options;this.$e.addClass("dragger");b.renderer.setup(this);this.$e.on("mousedown",b.dragTarget,function(c){if(!b.ignore(c)){a._init=!0;var d=c.originalEvent;a.initClientPos=new R(d.clientX,d.clientY);a.dragged=c.currentTarget}});$(document).on("mousemove",function(c){if(a._init||a.dragging)c=c.originalEvent,a.dragging?b.renderer.move(c,a.dragged):(new R(c.clientX,c.clientY)).distanceTo(a.initClientPos)>b.moveThreshold&&(a._init=!1,a.dragging=
!0,b.renderer.start(c,a.dragged))}).on("mouseup",function(c){a.dragging&&c.preventDefault();a._init=!1;a.dragging&&(a.dragging=!1,b.renderer.end(c.originalEvent,a.dragged),a.dragged=null)})};browser.ie&&(d.onhelp=function(){return!1});$(function(){function a(){gaWS("print",d.location.search)}var b=$("body").data("init");if(b)for(var c={home:va,"all-need":ya,website:ea,"web-header":za,"web-header-menu":O,"work-header":Aa,blog:Ba},b=b.split(","),g=0,h=b.length;g<h;g++){var p;(p=c[b[g].trim()])&&p()}d.matchMedia&&
d.matchMedia("print").addListener(function(b){b.matches&&a()});d.addEventListener("beforeprint",a);var f=$("body").data("user-id");(b=L("qrnpg",!1))&&F("qrnpg");if(null!=f&&(c=$.cookie("qrui"))&&!(f||"-").startsWith(c)&&!b){F("qrnpg","t",!1);b=location.href;location.href=b+(0<=b.indexOf("?")?"&":"?")+"_R_="+(new Date).getTime();return}b=$('a[href="/r/logout"]');b.attr("href","#");b.click(function(){function a(){d.location="/r/logout"}gae("acc","logout");if(!f)return a();var b=f.substring(0,7);cacheDal.put("navi:"+
b);cacheDal.put("mtk:"+b);E("notifs:"+f);E("notf.rd:"+f);d.caches&&caches.delete("sw-s3-cache");cacheDal.get("tc:metas",function(c){var d;if(c){for(var f=c.length;0<=--f;)b==c[f][4]&&(cacheDal.put("tc:"+c[f][0]+b),c.splice(f,1),d=!0);d&&cacheDal.put("tc:metas",c,function(){a()})}d||a()});setTimeout(a,1500)})})})(window);
